webpackJsonp([30],{Ki8w:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("qSEq"),u=t("alcQ"),o=t("ELdc"),n=t("FbRX"),l=t("Ygbj"),i={name:"menu-edit",componentName:"MenuEdit",mixins:[r.b,u.a],props:{moduleId:{type:String,required:!0},subModuleId:{type:String,required:!0},menuGroupId:{type:String,required:!0},data:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{menuGroup:{},formData:{},formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入菜单唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(a,t,r){/^[a-zA-Z0-9_]+$/.test(t)?e.$Ajax.get(n.a.get.validateValueCanUseBySubModuleId,[t,e.subModuleId],{params:{moduleId:e.moduleId,excludeValues:e.data.value}}).success(!0,function(e){e.records.canUse?r():r(new Error("菜单唯一标识符不可用"))}).fail(!0,function(e){r(new Error(e.resultInfo.message))}).catch(function(){r(new Error("发生错误...请稍后再试"))}):r(new Error("菜单唯一标识符格式不正确,只能由字母、数字、下划线组成"))},trigger:"blur"}]}}},watch:{data:function(e){this.resetEditForm()},menuGroupId:function(e){this.getMenuGroup()}},methods:{getMenuGroup:function(){var e=this;this.menuGroupId&&this.$Ajax.get(l.a.get.menuGroupByMenuGroupId,[this.menuGroupId],{params:{moduleId:this.moduleId}}).success(!0,function(a){e.menuGroup=a.records.menuGroup})},resetEditForm:function(){this.formData=Object(o.a)({},this.data)},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(a){if(!a)return!1;e.formLoading=!0,e.$Ajax.put(n.a.put.menuByMenuId,Object(o.a)({moduleId:e.moduleId,subModuleId:e.subModuleId,menuId:e.formData.id},e.formData)).success("修改菜单成功",function(){e.$emit("submit-success",e.formData,e)}).finally(function(){return e.formLoading=!1})})}},created:function(){this.getMenuGroup(),this.resetEditForm()}},s={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"common-padding-all"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"180px",size:"small"}},[t("el-form-item",{attrs:{label:"所属子模块："}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.subModuleName,callback:function(a){e.$set(e.formData,"subModuleName",a)},expression:"formData.subModuleName"}})],1),e._v(" "),e.menuGroupId?t("el-form-item",{attrs:{label:"菜单组名称："}},[t("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.menuGroup.name,callback:function(a){e.$set(e.menuGroup,"name",a)},expression:"menuGroup.name"}})],1):e._e(),e._v(" "),e.formData.parentId?t("el-form-item",{attrs:{label:"父级菜单名称："}},[t("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.formData.parentMenuName,callback:function(a){e.$set(e.formData,"parentMenuName",a)},expression:"formData.parentMenuName"}})],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单唯一标识符：",prop:"value"}},[t("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(a){e.$set(e.formData,"value",a)},expression:"formData.value"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"图标名称：",prop:"iconName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.formData.iconName,callback:function(a){e.$set(e.formData,"iconName",a)},expression:"formData.iconName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否使用选项卡：",prop:"useTab"}},[t("el-switch",{attrs:{"active-value":e.dict.menuUseTabValue.true,"inactive-value":e.dict.menuUseTabValue.false,"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.useTab,callback:function(a){e.$set(e.formData,"useTab",a)},expression:"formData.useTab"}})],1),e._v(" "),e.formData.useTab===e.dict.menuUseTabValue.true?[t("el-form-item",{attrs:{label:"是否缓存选项卡：",prop:"cacheInTab"}},[t("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.cacheInTab,callback:function(a){e.$set(e.formData,"cacheInTab",a)},expression:"formData.cacheInTab"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否在选项卡中默认打开：",prop:"initOpenInTab"}},[t("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.initOpenInTab,callback:function(a){e.$set(e.formData,"initOpenInTab",a)},expression:"formData.initOpenInTab"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否可以关闭选项卡：",prop:"closableInTab"}},[t("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.closableInTab,callback:function(a){e.$set(e.formData,"closableInTab",a)},expression:"formData.closableInTab"}})],1)]:e._e(),e._v(" "),t("el-form-item",{attrs:{label:"菜单描述：",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(a){e.$set(e.formData,"description",a)},expression:"formData.description"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("提交修改")]),e._v(" "),t("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetEditForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],2)],1)},staticRenderFns:[]},m=t("C7Lr")(i,s,!1,null,null,null);a.default=m.exports},Ygbj:function(e,a,t){"use strict";var r=t("Nj3f"),u={get:{menuGroupByMenuGroupId:r.a+"/api-gar-menu-group/get/menuGroupByMenuGroupId/{menuGroupId}",listMenuGroup:r.a+"/api-gar-menu-group/get/list/menuGroup",pageListMenuGroup:r.a+"/api-gar-menu-group/get/pageList/menuGroup",listMenuGroupBySubModuleId:r.a+"/api-gar-menu-group/get/list/menuGroupBySubModuleId/{subModuleId}"},post:{menuGroup:r.a+"/api-gar-menu-group/post/menuGroup"},put:{menuGroupByMenuGroupId:r.a+"/api-gar-menu-group/put/menuGroupByMenuGroupId/{menuGroupId}",menuGroupUseByMenuGroupId:r.a+"/api-gar-menu-group/put/menuGroupUseByMenuGroupId/{menuGroupId}/{menuGroupUse}",switchMenuGroupIndexByMenuGroupId:r.a+"/api-gar-menu-group/put/switchMenuGroupIndexByMenuGroupId/{sourceMenuGroupId}/{targetMenuGroupId}"},delete:{menuGroupByMenuGroupId:r.a+"/api-gar-menu-group/delete/menuGroupByMenuGroupId/{menuGroupId}",listMenuGroupByMenuGroupIds:r.a+"/api-gar-menu-group/delete/list/menuGroupByMenuGroupIds/{menuGroupIds}"}};a.a=u},alcQ:function(e,a,t){"use strict";a.a={data:function(){return{formRefValue$:"form",formLoading:!1}},methods:{resetForm:function(){this.$refs[this.formRefValue$].resetFields()}}}}});