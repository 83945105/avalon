webpackJsonp([13,16,19,27,30],{"+hZp":function(e,t,a){e.exports=a.p+"gar/img/no_authority_img.85ebcdd.png"},"29J1":function(e,t,a){e.exports=a.p+"gar/img/no_data_img.869b577.png"},"3TTE":function(e,t,a){"use strict";t.a={data:function(){return{treeAsyncProps:{label:"name",isLeaf:"leaf",children:"children",disabled:"disabled"},treeAsyncNodeKey:"id",treeAsyncRef:"treeAsync",treeAsyncSkeleton:!0,treeAsyncLoading:!1,treeAsyncRows:[],treeAsyncNodeDeleteLoading$:"delete_loading$",treeAsyncShowAdd:!1,treeAsyncAddLoading:!1,treeAsyncShowEdit:!1,treeAsyncEditLoading:!1,treeAsyncSelectedNode:{},treeAsyncSelectedNodeData:{},treeAsyncAutoExpandKeys:[]}},methods:{formatterTreeAsyncRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.formatterRow,o=t.formatterNodeIsLeaf,n=t.formatterNodeChildren;return e[this.treeAsyncNodeDeleteLoading$]=!1,a&&a(e),e[this.treeAsyncProps.isLeaf]=!o||o(e),e[this.treeAsyncProps.children]=n?n(e):[],e},formatterTreeAsyncRows:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.formatterRow,n=a.formatterNodeIsLeaf;return e.forEach(function(e){return t.formatterTreeAsyncRow(e,{formatterRow:o,formatterNodeIsLeaf:n})}),e},findRow:function(e,t){if(e&&0!==e.length&&t){var a=void 0;for(var o in e){if(""+e[o][this.treeAsyncNodeKey]==""+t)return e[o];if(a=this.findRow(e[o][this.treeAsyncProps.children],t))return a}}},isTreeAsyncRowHasChildren:function(e){return e[this.treeAsyncProps.children]&&e[this.treeAsyncProps.children].length>0},setTreeAsyncRowChildren:function(e,t){t&&(e[this.treeAsyncProps.children]=t)},addTreeAsyncRowChild:function(e,t){t&&(e[this.treeAsyncProps.children]||this.$set(e,this.treeAsyncProps.children,[]),e[this.treeAsyncProps.children].push(t))},expandTreeNodeByKeys:function(e){var t=e.key;this.$refs[this.treeAsyncRef].store.nodesMap[t].expand()}}}},BLcK:function(e,t,a){"use strict";var o=a("Nj3f"),n={get:{validateValueCanUse:o.a+"/api-gar-sub-module/get/validateValueCanUse/{value}",subModuleBySubModuleId:o.a+"/api-gar-sub-module/get/subModuleBySubModuleId/{subModuleId}",listSubModule:o.a+"/api-gar-sub-module/get/list/subModule",pageListSubModule:o.a+"/api-gar-sub-module/get/pageList/subModule",listSubModuleAndSubModuleRouteCount:o.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleRouteCount",listSubModuleAndSubModuleMenuGroupCount:o.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleMenuGroupCount"},post:{subModule:o.a+"/api-gar-sub-module/post/subModule"},put:{subModuleBySubModuleId:o.a+"/api-gar-sub-module/put/subModuleBySubModuleId/{subModuleId}",switchSubModuleIndexBySubModuleId:o.a+"/api-gar-sub-module/put/switchSubModuleIndexBySubModuleId/{sourceSubModuleId}/{targetSubModuleId}"},delete:{subModuleBySubModuleId:o.a+"/api-gar-sub-module/delete/subModuleBySubModuleId/{subModuleId}",listSubModuleBySubModuleIds:o.a+"/api-gar-sub-module/delete/list/subModuleBySubModuleIds/{subModuleIds}"}};t.a=n},Kgiw:function(e,t,a){e.exports=a.p+"gar/img/no_page_img.cccfdce.png"},Ki8w:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("qSEq"),n=a("alcQ"),r=a("ELdc"),u=a("FbRX"),s=a("Ygbj"),i={name:"menu-edit",componentName:"MenuEdit",mixins:[o.b,n.a],props:{moduleId:{type:String,required:!0},subModuleId:{type:String,required:!0},menuGroupId:{type:String,required:!0},data:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{menuGroup:{},formData:{},formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入菜单唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(t,a,o){/^[a-zA-Z0-9_]+$/.test(a)?e.$Ajax.get(u.a.get.validateValueCanUseBySubModuleId,[a,e.subModuleId],{params:{moduleId:e.moduleId,excludeValues:e.data.value}}).success(!0,function(e){e.records.canUse?o():o(new Error("菜单唯一标识符不可用"))}).fail(!0,function(e){o(new Error(e.resultInfo.message))}).catch(function(){o(new Error("发生错误...请稍后再试"))}):o(new Error("菜单唯一标识符格式不正确,只能由字母、数字、下划线组成"))},trigger:"blur"}]}}},watch:{data:function(e){this.resetEditForm()},menuGroupId:function(e){this.getMenuGroup()}},methods:{getMenuGroup:function(){var e=this;this.menuGroupId&&this.$Ajax.get(s.a.get.menuGroupByMenuGroupId,[this.menuGroupId],{params:{moduleId:this.moduleId}}).success(!0,function(t){e.menuGroup=t.records.menuGroup})},resetEditForm:function(){this.formData=Object(r.a)({},this.data)},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.put(u.a.put.menuByMenuId,Object(r.a)({moduleId:e.moduleId,subModuleId:e.subModuleId,menuId:e.formData.id},e.formData)).success("修改菜单成功",function(){e.$emit("submit-success",e.formData,e)}).finally(function(){return e.formLoading=!1})})}},created:function(){this.getMenuGroup(),this.resetEditForm()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-padding-all"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"180px",size:"small"}},[a("el-form-item",{attrs:{label:"所属子模块："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formData.subModuleName,callback:function(t){e.$set(e.formData,"subModuleName",t)},expression:"formData.subModuleName"}})],1),e._v(" "),e.menuGroupId?a("el-form-item",{attrs:{label:"菜单组名称："}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.menuGroup.name,callback:function(t){e.$set(e.menuGroup,"name",t)},expression:"menuGroup.name"}})],1):e._e(),e._v(" "),e.formData.parentId?a("el-form-item",{attrs:{label:"父级菜单名称："}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.formData.parentMenuName,callback:function(t){e.$set(e.formData,"parentMenuName",t)},expression:"formData.parentMenuName"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单唯一标识符：",prop:"value"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标名称：",prop:"iconName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.iconName,callback:function(t){e.$set(e.formData,"iconName",t)},expression:"formData.iconName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否使用选项卡：",prop:"useTab"}},[a("el-switch",{attrs:{"active-value":e.dict.menuUseTabValue.true,"inactive-value":e.dict.menuUseTabValue.false,"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.useTab,callback:function(t){e.$set(e.formData,"useTab",t)},expression:"formData.useTab"}})],1),e._v(" "),e.formData.useTab===e.dict.menuUseTabValue.true?[a("el-form-item",{attrs:{label:"是否缓存选项卡：",prop:"cacheInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.cacheInTab,callback:function(t){e.$set(e.formData,"cacheInTab",t)},expression:"formData.cacheInTab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在选项卡中默认打开：",prop:"initOpenInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.initOpenInTab,callback:function(t){e.$set(e.formData,"initOpenInTab",t)},expression:"formData.initOpenInTab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可以关闭选项卡：",prop:"closableInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.closableInTab,callback:function(t){e.$set(e.formData,"closableInTab",t)},expression:"formData.closableInTab"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("提交修改")]),e._v(" "),a("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetEditForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],2)],1)},staticRenderFns:[]},d=a("C7Lr")(i,l,!1,null,null,null);t.default=d.exports},Ygbj:function(e,t,a){"use strict";var o=a("Nj3f"),n={get:{menuGroupByMenuGroupId:o.a+"/api-gar-menu-group/get/menuGroupByMenuGroupId/{menuGroupId}",listMenuGroup:o.a+"/api-gar-menu-group/get/list/menuGroup",pageListMenuGroup:o.a+"/api-gar-menu-group/get/pageList/menuGroup",listMenuGroupBySubModuleId:o.a+"/api-gar-menu-group/get/list/menuGroupBySubModuleId/{subModuleId}"},post:{menuGroup:o.a+"/api-gar-menu-group/post/menuGroup"},put:{menuGroupByMenuGroupId:o.a+"/api-gar-menu-group/put/menuGroupByMenuGroupId/{menuGroupId}",menuGroupUseByMenuGroupId:o.a+"/api-gar-menu-group/put/menuGroupUseByMenuGroupId/{menuGroupId}/{menuGroupUse}",switchMenuGroupIndexByMenuGroupId:o.a+"/api-gar-menu-group/put/switchMenuGroupIndexByMenuGroupId/{sourceMenuGroupId}/{targetMenuGroupId}"},delete:{menuGroupByMenuGroupId:o.a+"/api-gar-menu-group/delete/menuGroupByMenuGroupId/{menuGroupId}",listMenuGroupByMenuGroupIds:o.a+"/api-gar-menu-group/delete/list/menuGroupByMenuGroupIds/{menuGroupIds}"}};t.a=n},alcQ:function(e,t,a){"use strict";t.a={data:function(){return{formRefValue$:"form",formLoading:!1}},methods:{resetForm:function(){this.$refs[this.formRefValue$].resetFields()}}}},elhn:function(e,t,a){"use strict";var o={name:"error-page",componentName:"ErrorPage",optionName:"errorPage",props:{type:{type:[String,Number],default:"noData"},title:String,imageWidth:{type:Number,default:200},imageHeight:{type:Number,default:200}},computed:{__title__:function(){return this.title?this.title:403===this.type||"403"===this.type?"抱歉您无权查看此页面。":404===this.type||"404"===this.type?"抱歉，您访问的页面不存在。":500===this.type||"500"===this.type?"抱歉，您的网络有问题加载失败。":"抱歉暂无信息。"}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"global-no-data"},[e._t("default",[403===e.type||"403"===e.type?o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:a("+hZp")}}):404===e.type||"404"===e.type?o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:a("29J1")}}):500===e.type||"500"===e.type?o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:a("Kgiw")}}):o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:a("29J1")}})]),e._v(" "),o("div",{staticClass:"global-no-data-text",class:{"is-margin-top":0!==e.imageWidth&&0!==e.imageHeight}},[e._t("title",[o("span",[e._v(e._s(e.__title__))])])],2),e._v(" "),o("div",{staticClass:"global-no-data-button"},[e._t("footer")],2)],2)},staticRenderFns:[]},r=a("C7Lr")(o,n,!1,null,null,null);t.a=r.exports},fHba:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("qSEq"),n=a("alcQ"),r=a("elhn"),u=a("ELdc"),s=a("Ygbj"),i={name:"menu-group-edit",componentName:"MenuGroupEdit",components:{ErrorPage:r.a},mixins:[o.b,n.a],props:{moduleId:{type:String,required:!0},subModuleId:{type:String,required:!0},data:{type:Object,default:function(){return{}}}},data:function(){return{formData:{},formRules:{name:[{required:!0,message:"请输入菜单组名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择菜单组类型",trigger:"change"}]}}},watch:{data:function(e){this.resetEditForm()}},methods:{resetEditForm:function(){this.formData=Object(u.a)({},this.data)},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.put(s.a.put.menuGroupByMenuGroupId,Object(u.a)({moduleId:e.moduleId,menuGroupId:e.formData.id},e.formData)).success("修改菜单组成功",function(){e.$emit("submit-success",e.formData,e)}).finally(function(){return e.formLoading=!1})})}},created:function(){this.resetEditForm()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-padding-all"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"所属子模块："}},[a("el-input",{attrs:{disabled:""},model:{value:e.formData.subModuleName,callback:function(t){e.$set(e.formData,"subModuleName",t)},expression:"formData.subModuleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单组名称：",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单组类型：",prop:"type"}},[a("el-select",{staticClass:"common-w-all",attrs:{size:"small",placeholder:"请选择菜单组类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.dict.menuGroupTypes,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单组描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("提交修改")]),e._v(" "),a("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetEditForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],1)],1)},staticRenderFns:[]},d=a("C7Lr")(i,l,!1,null,null,null);t.default=d.exports},lY4J:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("qSEq"),n=a("alcQ"),r=a("elhn"),u=a("ELdc"),s=a("BLcK"),i=a("Ygbj"),l={name:"",type:"",description:"",status:""},d={name:"menu-group-add",componentName:"MenuGroupAdd",components:{ErrorPage:r.a},mixins:[o.b,n.a],props:{moduleId:{type:String,required:!0},subModuleId:{type:String,required:!0}},data:function(){return{subModule:{},formData:Object(u.a)({},l,{status:o.a.dict.statusValue.NORMAL}),formRules:{name:[{required:!0,message:"请输入菜单组名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择菜单组类型",trigger:"change"}]}}},watch:{subModuleId:function(e){this.getSubModule()}},methods:{getSubModule:function(){var e=this;this.subModuleId&&this.$Ajax.get(s.a.get.subModuleBySubModuleId,[this.subModuleId],{params:{moduleId:this.moduleId}}).success(!0,function(t){e.subModule=t.records.subModule})},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.post(i.a.post.menuGroup,Object(u.a)({moduleId:e.moduleId,subModuleId:e.subModuleId},e.formData)).success("新增菜单组成功",function(t){e.$emit("submit-success",t.records.menuGroup,e),e.resetForm()}).finally(function(){return e.formLoading=!1})})}},created:function(){this.getSubModule()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-padding-all"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"所属子模块："}},[a("el-input",{attrs:{disabled:""},model:{value:e.subModule.name,callback:function(t){e.$set(e.subModule,"name",t)},expression:"subModule.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单组名称：",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单组类型：",prop:"type"}},[a("el-select",{staticClass:"common-w-all",attrs:{size:"small",placeholder:"请选择菜单类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.dict.menuGroupTypes,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单组描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),a("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],1)],1)},staticRenderFns:[]},m=a("C7Lr")(d,c,!1,null,null,null);t.default=m.exports},nhkL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("qSEq"),n=a("alcQ"),r=a("ELdc"),u=a("FbRX"),s=a("Ygbj"),i=a("BLcK"),l={name:"",value:"",iconName:"",useTab:"",cacheInTab:"",initOpenInTab:"",closableInTab:"",description:"",status:""},d={name:"menu-add",componentName:"MenuAdd",mixins:[o.b,n.a],props:{moduleId:{type:String,required:!0},subModuleId:{type:String,required:!0},menuGroupId:{type:String,required:!0},parentMenuId:{type:String,required:!0}},data:function(){var e=this;return{subModule:{},menuGroup:{},parentMenu:{},formData:Object(r.a)({},l,{useTab:o.a.dict.menuUseTabValue.true,cacheInTab:"true",initOpenInTab:"false",closableInTab:"true",status:o.a.dict.statusValue.NORMAL}),formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入菜单唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(t,a,o){/^[a-zA-Z0-9_]+$/.test(a)?e.$Ajax.get(u.a.get.validateValueCanUseBySubModuleId,[a,e.subModuleId],{params:{moduleId:e.moduleId}}).success(!0,function(e){e.records.canUse?o():o(new Error("菜单唯一标识符不可用"))}).fail(!0,function(e){o(new Error(e.resultInfo.message))}).catch(function(){o(new Error("发生错误...请稍后再试"))}):o(new Error("菜单唯一标识符格式不正确,只能由字母、数字、下划线组成"))},trigger:"blur"}]}}},watch:{subModuleId:function(e){this.getSubModule()},menuGroupId:function(e){this.getMenuGroup()},parentMenuId:function(e){this.getParentMenu()}},methods:{getSubModule:function(){var e=this;this.subModuleId&&this.$Ajax.get(i.a.get.subModuleBySubModuleId,[this.subModuleId],{params:{moduleId:this.moduleId}}).success(!0,function(t){e.subModule=t.records.subModule})},getMenuGroup:function(){var e=this;this.menuGroupId&&this.$Ajax.get(s.a.get.menuGroupByMenuGroupId,[this.menuGroupId],{params:{moduleId:this.moduleId}}).success(!0,function(t){e.menuGroup=t.records.menuGroup})},getParentMenu:function(){var e=this;this.parentMenuId&&this.$Ajax.get(u.a.get.menuByMenuId,[this.parentMenuId],{params:{moduleId:this.moduleId}}).success(!0,function(t){e.parentMenu=t.records.menu})},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.post(u.a.post.menu,Object(r.a)({moduleId:e.moduleId,subModuleId:e.subModuleId,menuGroupId:e.menuGroupId,parentId:e.parentMenuId},e.formData)).success("新增菜单成功",function(t){e.$emit("submit-success",t.records.menu,e),e.resetForm()}).finally(function(){return e.formLoading=!1})})}},created:function(){this.getSubModule(),this.getMenuGroup(),this.getParentMenu()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-padding-all"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"180px",size:"small"}},[a("el-form-item",{attrs:{label:"所属子模块："}},[a("el-input",{attrs:{disabled:""},model:{value:e.subModule.name,callback:function(t){e.$set(e.subModule,"name",t)},expression:"subModule.name"}})],1),e._v(" "),e.menuGroupId?a("el-form-item",{attrs:{label:"菜单组名称："}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.menuGroup.name,callback:function(t){e.$set(e.menuGroup,"name",t)},expression:"menuGroup.name"}})],1):e._e(),e._v(" "),e.parentMenuId?a("el-form-item",{attrs:{label:"父级菜单名称："}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.parentMenu.name,callback:function(t){e.$set(e.parentMenu,"name",t)},expression:"parentMenu.name"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单唯一标识符：",prop:"value"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标名称：",prop:"iconName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.iconName,callback:function(t){e.$set(e.formData,"iconName",t)},expression:"formData.iconName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否使用选项卡：",prop:"useTab"}},[a("el-switch",{attrs:{"active-value":e.dict.menuUseTabValue.true,"inactive-value":e.dict.menuUseTabValue.false,"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.useTab,callback:function(t){e.$set(e.formData,"useTab",t)},expression:"formData.useTab"}})],1),e._v(" "),e.formData.useTab===e.dict.menuUseTabValue.true?[a("el-form-item",{attrs:{label:"是否缓存选项卡：",prop:"cacheInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.cacheInTab,callback:function(t){e.$set(e.formData,"cacheInTab",t)},expression:"formData.cacheInTab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在选项卡中默认打开：",prop:"initOpenInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.initOpenInTab,callback:function(t){e.$set(e.formData,"initOpenInTab",t)},expression:"formData.initOpenInTab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可以关闭选项卡：",prop:"closableInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.closableInTab,callback:function(t){e.$set(e.formData,"closableInTab",t)},expression:"formData.closableInTab"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),a("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],2)],1)},staticRenderFns:[]},m=a("C7Lr")(d,c,!1,null,null,null);t.default=m.exports},u6tF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("qSEq"),n=a("pnBm"),r=a("3TTE"),u=a("elhn"),s=a("nhkL"),i=a("Ki8w"),l=a("lY4J"),d=a("fHba"),c=a("ELdc"),m=a("BLcK"),p=a("FbRX"),f=a("Ygbj"),b={likeText:""},h={name:"menu-tree",componentName:"MenuTree",components:{ErrorPage:u.a,MenuAdd:s.default,MenuEdit:i.default,MenuGroupAdd:l.default,MenuGroupEdit:d.default},mixins:[o.b,n.a,r.a],props:{moduleId:{type:String,required:!0},subModuleId:String,menuId:String},data:function(){return{params:Object(c.a)({},b),treeAsyncProps:{label:"name",isLeaf:"leaf",children:"children",disabled:"disabled"},treeAsyncNodeKey:"id",selectedSubModuleId:"",selectedMenuGroupId:"",selectedMenuId:"",menuGroupShowAdd:!1,menuGroupShowEdit:!1,selectedMenuGroupData:{},menuGroupCheckedLoading:!1}},methods:{remove:function(e){this.$refs[this.treeAsyncRef].remove(e)},append:function(e,t){if(t){e=this.formatterTreeAsyncRow(e,{formatterRow:function(e){e.expanded=!1},formatterNodeIsLeaf:function(e){return 0===e.childCount}});var a=this.$refs[this.treeAsyncRef];a.append(e,a.getNode(t))}},insertAfterRoot:function(e){e=this.formatterTreeAsyncRow(e,{formatterRow:function(e){e.expanded=!1,e.dataType="Menu"},formatterNodeIsLeaf:function(e){return 0===e.childCount}});var t=this.$refs[this.treeAsyncRef];t.insertAfter(e,t.getNode(this.treeAsyncRows[this.treeAsyncRows.length-1]))},getCheckedNodes:function(e,t){return this.$refs[this.treeAsyncRef].getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.$refs[this.treeAsyncRef].getCheckedKeys(e)},getRow:function(){var e=this;this.$Ajax.get(p.a.get.menuByMenuId,[this.menuId],{params:{moduleId:this.moduleId}}).success(!0,function(t){var a=t.records.menu,o=[e.subModuleId,a.menuGroupId];a.parentIds&&a.parentIds.split("/").forEach(function(e){e&&o.push(e)}),e.expandTreeNodeByKeys({key:o[0]})})},getTreeAsyncRows:function(){var e=this;this.$emit("check",{},{checkedNodes:[],checkedKeys:[],halfCheckedKeys:[],halfCheckedNodes:[]},this),this.treeAsyncLoading=!0,this.$Ajax.get(m.a.get.listSubModuleAndSubModuleMenuGroupCount,Object(c.a)({moduleId:this.moduleId},this.params)).success(!0,function(t){e.treeAsyncSkeleton=!1,e.$nextTick(function(){e.treeAsyncRows=e.formatterTreeAsyncRows(t.rows,{formatterRow:function(e){e.expanded=!1,e.dataType="SubModule"},formatterNodeIsLeaf:function(e){return 0===e.menuGroupCount}})})}).notSuccess(function(){return e.treeAsyncSkeleton=500}).catch(function(){return e.treeAsyncSkeleton=500}).finally(function(){return e.treeAsyncLoading=!1})},getTreeAsyncNodes:function(e,t){var a=this;1===e.level?this.$Ajax.get(f.a.get.listMenuGroupBySubModuleId,[e.data.id],{params:{moduleId:this.moduleId}}).success(!0,function(o){e.data.expanded=!0;var n=a.formatterTreeAsyncRows(o.rows,{formatterRow:function(e){e.expanded=!1,e.dataType="MenuGroup",e.checked=e.use===a.dict.menuGroupUseValue.TRUE},formatterNodeIsLeaf:function(e){return 0===e.rootMenuCount}});t(n)}):2===e.level?this.$Ajax.get(p.a.get.listRootMenuBySubModuleIdAndMenuGroupId,[e.data.subModuleId,e.data.id],{params:{moduleId:this.moduleId}}).success(!0,function(o){e.data.expanded=!0;var n=a.formatterTreeAsyncRows(o.rows,{formatterRow:function(e){e.expanded=!1,e.dataType="Menu"},formatterNodeIsLeaf:function(e){return 0===e.childCount}});t(n)}):e.level>2&&this.$Ajax.get(p.a.get.listMenuByParentId,[e.data.id],{params:{moduleId:this.moduleId}}).success(!0,function(o){e.data.expanded=!0;var n=a.formatterTreeAsyncRows(o.rows,{formatterRow:function(e){e.expanded=!1,e.dataType="Menu"},formatterNodeIsLeaf:function(e){return 0===e.childCount}});t(n)})},handleClickAddIcon:function(e){e.node;var t=e.data;"Menu"===t.dataType&&(this.selectedMenuGroupId=t.menuGroupId,this.selectedMenuId=t.id,this.selectedSubModuleId=t.subModuleId,this.treeAsyncShowAdd=!0),"MenuGroup"===t.dataType&&(this.selectedMenuGroupId=t.id,this.selectedMenuId="",this.selectedSubModuleId=t.subModuleId,this.treeAsyncShowAdd=!0),"SubModule"===t.dataType&&(this.selectedMenuGroupId="",this.selectedMenuId="",this.selectedSubModuleId=t.id,this.menuGroupShowAdd=!0)},handleClickEditIcon:function(e){e.node;var t=e.data;"Menu"===t.dataType&&(this.treeAsyncSelectedNodeData=t,this.selectedMenuGroupId=t.menuGroupId,this.selectedMenuId=t.id,this.selectedSubModuleId=t.subModuleId,this.treeAsyncShowEdit=!0),"MenuGroup"===t.dataType&&(this.selectedMenuGroupData=t,this.selectedMenuGroupId=t.id,this.selectedMenuId="",this.selectedSubModuleId=t.subModuleId,this.menuGroupShowEdit=!0)},handleMenuGroupAddSuccess:function(e,t){var a=this.formatterTreeAsyncRow(e,{formatterRow:function(e){e.expanded=!1,e.dataType="MenuGroup"},formatterNodeIsLeaf:function(e){return 0===e.rootMenuCount}});this.append(a,a.subModuleId)},handleMenuGroupEditSuccess:function(e,t){Object(c.a)(this.selectedMenuGroupData,e),this.selectedMenuGroupData.expanded},handleMenuAddSuccess:function(e,t){var a=this.formatterTreeAsyncRow(e,{formatterRow:function(e){e.expanded=!1,e.dataType="Menu"},formatterNodeIsLeaf:function(e){return 0===e.childCount}});this.append(a,a.parentId?a.parentId:a.menuGroupId)},handleMenuEditSuccess:function(e,t){Object(c.a)(this.treeAsyncSelectedNodeData,e),this.treeAsyncSelectedNodeData.expanded},handleDeleteRow:function(e,t,a){var o=this,n=(a.node,a.data);n[this.treeAsyncNodeDeleteLoading$]=!0,"Menu"===n.dataType?this.$Ajax.delete(p.a.delete.menuByMenuId,{moduleId:this.moduleId,menuId:n.id}).before(function(){return n[o.treeAsyncNodeDeleteLoading$]=!1}).success("删除成功",function(){o.remove(n),t.close(),o.routerToMenuTree({moduleId:o.moduleId})}):"MenuGroup"===n.dataType&&this.$Ajax.delete(f.a.delete.menuGroupByMenuGroupId,{moduleId:this.moduleId,menuGroupId:n.id}).before(function(){return n[o.treeAsyncNodeDeleteLoading$]=!1}).success("删除成功",function(){o.remove(n),t.close(),o.routerToMenuTree({moduleId:o.moduleId})})},handleDblClickTreeAsyncNode:function(e){var t=e.node;e.data;t.expanded?t.collapse():t.expand()},handleSelectedTreeNode:function(e,t){"Menu"===e.dataType?this.routerToMenuRouteRole({moduleId:this.moduleId,subModuleId:e.subModuleId,menuId:e.id}):this.routerToMenuTree({moduleId:this.moduleId})},handleChangeMenuGroupChecked:function(e){var t=this,a=(e.node,e.data);e.value?(this.menuGroupCheckedLoading=!0,this.$Ajax.put(f.a.put.menuGroupByMenuGroupId,{moduleId:this.moduleId,menuGroupId:a.id,use:this.dict.menuGroupUseValue.TRUE}).success(!0,function(){a.use=t.dict.menuGroupUseValue.TRUE}).notSuccess(function(){return a.checked=!1}).finally(function(){return t.menuGroupCheckedLoading=!1})):this.$confirm({content:'如果您取消使用该菜单组,该菜单组下<span style="color: red">所有菜单</span>将解除与路由之间的关系,您确定要这么做吗？',width:"500px",onClickConfirmButton:function(e,o){t.menuGroupCheckedLoading=!0,t.$Ajax.put(f.a.put.menuGroupByMenuGroupId,{moduleId:t.moduleId,menuGroupId:a.id,use:t.dict.menuGroupUseValue.FALSE}).success(!0,function(){a.use=t.dict.menuGroupUseValue.FALSE,o.close()}).notSuccess(function(){return a.checked=!0}).finally(function(){return t.menuGroupCheckedLoading=!1})}})}},created:function(){this.getTreeAsyncRows()}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-input",{staticClass:"common-wp-75 common-float-left",attrs:{size:"small",placeholder:"请输入关键字",clearable:""},model:{value:e.params.likeText,callback:function(t){e.$set(e.params,"likeText",t)},expression:"params.likeText"}}),e._v(" "),a("we-button",{staticClass:"common-float-left",staticStyle:{width:"24%","margin-left":"1%"},attrs:{loading:e.treeAsyncLoading,size:"small"},on:{click:e.getTreeAsyncRows}},[e._v("查询\n    ")]),e._v(" "),a("div",{staticClass:"common-clear"})],1),e._v(" "),a("div",{staticClass:"gar-layout-custom common-padding-all-small common-scroll-v",staticStyle:{top:"42px","padding-top":"0"}},[a("we-skeleton",{attrs:{animation:"","paragraph-rows":8},on:{reload:e.getTreeAsyncRows},model:{value:e.treeAsyncSkeleton,callback:function(t){e.treeAsyncSkeleton=t},expression:"treeAsyncSkeleton"}},[a("el-tree",{ref:e.treeAsyncRef,staticClass:"common-margin-t-small gar-tree-custom",attrs:{data:e.treeAsyncRows,props:e.treeAsyncProps,"node-key":e.treeAsyncNodeKey,lazy:!0,load:e.getTreeAsyncNodes,"expand-on-click-node":!1,"check-strictly":!0,"empty-text":"暂无菜单数据","highlight-current":""},on:{"current-change":e.handleSelectedTreeNode},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"custom-tree-node-left",on:{dblclick:function(t){e.handleDblClickTreeAsyncNode({node:o,data:n})}}},["MenuGroup"===n.dataType?[a("el-checkbox",{attrs:{disabled:e.menuGroupCheckedLoading},on:{change:function(t){return e.handleChangeMenuGroupChecked({node:o,data:n,value:t})}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"data.checked"}})]:e._e(),e._v(" "),"Menu"===n.dataType?a("we-icon",{attrs:{name:n.iconName}}):"MenuGroup"===n.dataType?a("we-icon",{attrs:{name:"gar-type"}}):"SubModule"===n.dataType?a("we-icon",{attrs:{name:"gar-sub-module"}}):e._e(),e._v("\n            "+e._s(o.label)+"\n          ")],2),e._v(" "),a("span",{staticClass:"custom-tree-node-right"},["Menu"===n.dataType?[a("el-popover",{attrs:{placement:"right",title:"查看",width:"400",trigger:"click"}},[a("ul",{staticClass:"gar-form-view label-width-12"},[a("li",[a("em",{staticClass:"view-left"},[e._v("菜单名称：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s(n.name))])]),e._v(" "),a("li",[a("em",{staticClass:"view-left"},[e._v("菜单唯一标识符：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s(n.value))])]),e._v(" "),a("li",[a("em",{staticClass:"view-left"},[e._v("图标名称：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s(n.iconName))])]),e._v(" "),a("li",[a("em",{staticClass:"view-left"},[e._v("是否使用选项卡：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s(e.dict.menuUseTabLabel[n.useTab]))])]),e._v(" "),n.useTab===e.dict.menuUseTabValue.true?[a("li",[a("em",{staticClass:"view-left"},[e._v("是否缓存选项卡：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s("true"===n.cacheInTab?"是":"否"))])]),e._v(" "),a("li",[a("em",{staticClass:"view-left"},[e._v("是否在选项卡中默认打开：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s("true"===n.initOpenInTab?"是":"否"))])]),e._v(" "),a("li",[a("em",{staticClass:"view-left"},[e._v("是否可以关闭选项卡：")]),e._v(" "),a("div",{staticClass:"view-right"},[e._v(e._s("true"===n.closableInTab?"是":"否"))])])]:e._e()],2),e._v(" "),a("we-button",{attrs:{slot:"reference",type:"text",size:"small",iconName:"search-o"},slot:"reference"})],1)]:e._e(),e._v(" "),a("we-button",{staticStyle:{"margin-left":"6px"},attrs:{type:"text",size:"small",iconName:"plus"},on:{click:function(t){e.handleClickAddIcon({node:o,data:n})}}}),e._v(" "),"Menu"===n.dataType||"MenuGroup"===n.dataType?[a("we-button",{staticStyle:{"margin-left":"6px"},attrs:{type:"text",size:"small",iconName:"edit"},on:{click:function(t){e.handleClickEditIcon({node:o,data:n})}}}),e._v(" "),a("we-popover",{attrs:{title:"操作",type:"confirm",placement:"right",manual:n[e.treeAsyncNodeDeleteLoading$],"confirm-button-text":"删了吧","cancel-button-text":n[e.treeAsyncNodeDeleteLoading$]?"你没有想的机会了":"我再想想","cancel-button-options":{disabled:n[e.treeAsyncNodeDeleteLoading$]},"confirm-button-options":{loading:n[e.treeAsyncNodeDeleteLoading$]}},on:{"click-cancel-button":function(e,t){return t.close()},"click-confirm-button":function(t,a){return e.handleDeleteRow(t,a,{node:o,data:n})}}},[a("template",{slot:"content"},[n[e.treeAsyncNodeDeleteLoading$]?[a("span",{staticStyle:{color:"red"}},[e._v("删除中...")]),e._v("删除完成后将自动关闭气泡\n                  ")]:[e._v("\n                    您确定要"),a("span",{staticStyle:{color:"red"}},[e._v("删除")]),e._v("该菜单"+e._s("MenuGroup"===n.dataType?"组":"")),a("span",{staticStyle:{color:"red"}},[e._v("及相关数据")]),e._v("吗？\n                    "),a("div",{staticStyle:{color:"red"}},[e._v("删除后不可恢复！！！")])]],2),e._v(" "),a("we-button",{staticStyle:{"margin-left":"6px"},attrs:{type:"text",size:"small",iconName:"trash"}})],2)]:e._e()],2),e._v(" "),a("div",{staticClass:"common-clear"})])}}])})],1)],1),e._v(" "),a("we-layer",{attrs:{title:"新增菜单组",width:50,height:80,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.menuGroupShowAdd,callback:function(t){e.menuGroupShowAdd=t},expression:"menuGroupShowAdd"}},[a("menu-group-add",{attrs:{"module-id":e.moduleId,"sub-module-id":e.selectedSubModuleId},on:{"submit-success":e.handleMenuGroupAddSuccess}},[a("template",{slot:"button"},[a("el-button",{on:{click:function(t){e.menuGroupShowAdd=!1}}},[e._v("关闭")])],1)],2)],1),e._v(" "),a("we-layer",{attrs:{title:"编辑菜单组",width:50,height:80,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.menuGroupShowEdit,callback:function(t){e.menuGroupShowEdit=t},expression:"menuGroupShowEdit"}},[a("menu-group-edit",{attrs:{"module-id":e.moduleId,"sub-module-id":e.selectedSubModuleId,data:e.selectedMenuGroupData},on:{"submit-success":e.handleMenuGroupEditSuccess}},[a("template",{slot:"button"},[a("el-button",{on:{click:function(t){e.menuGroupShowEdit=!1}}},[e._v("关闭")])],1)],2)],1),e._v(" "),a("we-layer",{attrs:{title:"新增菜单",width:50,height:80,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.treeAsyncShowAdd,callback:function(t){e.treeAsyncShowAdd=t},expression:"treeAsyncShowAdd"}},[a("menu-add",{attrs:{"module-id":e.moduleId,"sub-module-id":e.selectedSubModuleId,"menu-group-id":e.selectedMenuGroupId,"parent-menu-id":e.selectedMenuId},on:{"submit-success":e.handleMenuAddSuccess}},[a("template",{slot:"button"},[a("el-button",{on:{click:function(t){e.treeAsyncShowAdd=!1}}},[e._v("关闭")])],1)],2)],1),e._v(" "),a("we-layer",{attrs:{title:"编辑菜单",width:50,height:80,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.treeAsyncShowEdit,callback:function(t){e.treeAsyncShowEdit=t},expression:"treeAsyncShowEdit"}},[a("div",{staticClass:"common-padding-all",staticStyle:{"padding-bottom":"0"}},[a("menu-edit",{attrs:{"module-id":e.moduleId,"sub-module-id":e.selectedSubModuleId,"menu-group-id":e.selectedMenuGroupId,data:e.treeAsyncSelectedNodeData},on:{"submit-success":e.handleMenuEditSuccess}},[a("template",{slot:"button"},[a("el-button",{on:{click:function(t){e.treeAsyncShowEdit=!1}}},[e._v("关闭")])],1)],2)],1)])],1)},staticRenderFns:[]},v=a("C7Lr")(h,g,!1,null,null,null);t.default=v.exports}});