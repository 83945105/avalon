webpackJsonp([27],{BLcK:function(e,u,a){"use strict";var t=a("Nj3f"),o={get:{validateValueCanUse:t.a+"/api-gar-sub-module/get/validateValueCanUse/{value}",subModuleBySubModuleId:t.a+"/api-gar-sub-module/get/subModuleBySubModuleId/{subModuleId}",listSubModule:t.a+"/api-gar-sub-module/get/list/subModule",pageListSubModule:t.a+"/api-gar-sub-module/get/pageList/subModule",listSubModuleAndSubModuleRouteCount:t.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleRouteCount",listSubModuleAndSubModuleMenuGroupCount:t.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleMenuGroupCount"},post:{subModule:t.a+"/api-gar-sub-module/post/subModule"},put:{subModuleBySubModuleId:t.a+"/api-gar-sub-module/put/subModuleBySubModuleId/{subModuleId}",switchSubModuleIndexBySubModuleId:t.a+"/api-gar-sub-module/put/switchSubModuleIndexBySubModuleId/{sourceSubModuleId}/{targetSubModuleId}"},delete:{subModuleBySubModuleId:t.a+"/api-gar-sub-module/delete/subModuleBySubModuleId/{subModuleId}",listSubModuleBySubModuleIds:t.a+"/api-gar-sub-module/delete/list/subModuleBySubModuleIds/{subModuleIds}"}};u.a=o},Ygbj:function(e,u,a){"use strict";var t=a("Nj3f"),o={get:{menuGroupByMenuGroupId:t.a+"/api-gar-menu-group/get/menuGroupByMenuGroupId/{menuGroupId}",listMenuGroup:t.a+"/api-gar-menu-group/get/list/menuGroup",pageListMenuGroup:t.a+"/api-gar-menu-group/get/pageList/menuGroup",listMenuGroupBySubModuleId:t.a+"/api-gar-menu-group/get/list/menuGroupBySubModuleId/{subModuleId}"},post:{menuGroup:t.a+"/api-gar-menu-group/post/menuGroup"},put:{menuGroupByMenuGroupId:t.a+"/api-gar-menu-group/put/menuGroupByMenuGroupId/{menuGroupId}",menuGroupUseByMenuGroupId:t.a+"/api-gar-menu-group/put/menuGroupUseByMenuGroupId/{menuGroupId}/{menuGroupUse}",switchMenuGroupIndexByMenuGroupId:t.a+"/api-gar-menu-group/put/switchMenuGroupIndexByMenuGroupId/{sourceMenuGroupId}/{targetMenuGroupId}"},delete:{menuGroupByMenuGroupId:t.a+"/api-gar-menu-group/delete/menuGroupByMenuGroupId/{menuGroupId}",listMenuGroupByMenuGroupIds:t.a+"/api-gar-menu-group/delete/list/menuGroupByMenuGroupIds/{menuGroupIds}"}};u.a=o},alcQ:function(e,u,a){"use strict";u.a={data:function(){return{formRefValue$:"form",formLoading:!1}},methods:{resetForm:function(){this.$refs[this.formRefValue$].resetFields()}}}},nhkL:function(e,u,a){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var t=a("qSEq"),o=a("alcQ"),r=a("ELdc"),n=a("FbRX"),l=a("Ygbj"),s=a("BLcK"),i={name:"",value:"",iconName:"",useTab:"",cacheInTab:"",initOpenInTab:"",closableInTab:"",description:"",status:""},d={name:"menu-add",componentName:"MenuAdd",mixins:[t.b,o.a],props:{moduleId:{type:String,required:!0},subModuleId:{type:String,required:!0},menuGroupId:{type:String,required:!0},parentMenuId:{type:String,required:!0}},data:function(){var e=this;return{subModule:{},menuGroup:{},parentMenu:{},formData:Object(r.a)({},i,{useTab:t.a.dict.menuUseTabValue.true,cacheInTab:"true",initOpenInTab:"false",closableInTab:"true",status:t.a.dict.statusValue.NORMAL}),formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入菜单唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(u,a,t){/^[a-zA-Z0-9_]+$/.test(a)?e.$Ajax.get(n.a.get.validateValueCanUseBySubModuleId,[a,e.subModuleId],{params:{moduleId:e.moduleId}}).success(!0,function(e){e.records.canUse?t():t(new Error("菜单唯一标识符不可用"))}).fail(!0,function(e){t(new Error(e.resultInfo.message))}).catch(function(){t(new Error("发生错误...请稍后再试"))}):t(new Error("菜单唯一标识符格式不正确,只能由字母、数字、下划线组成"))},trigger:"blur"}]}}},watch:{subModuleId:function(e){this.getSubModule()},menuGroupId:function(e){this.getMenuGroup()},parentMenuId:function(e){this.getParentMenu()}},methods:{getSubModule:function(){var e=this;this.subModuleId&&this.$Ajax.get(s.a.get.subModuleBySubModuleId,[this.subModuleId],{params:{moduleId:this.moduleId}}).success(!0,function(u){e.subModule=u.records.subModule})},getMenuGroup:function(){var e=this;this.menuGroupId&&this.$Ajax.get(l.a.get.menuGroupByMenuGroupId,[this.menuGroupId],{params:{moduleId:this.moduleId}}).success(!0,function(u){e.menuGroup=u.records.menuGroup})},getParentMenu:function(){var e=this;this.parentMenuId&&this.$Ajax.get(n.a.get.menuByMenuId,[this.parentMenuId],{params:{moduleId:this.moduleId}}).success(!0,function(u){e.parentMenu=u.records.menu})},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(u){if(!u)return!1;e.formLoading=!0,e.$Ajax.post(n.a.post.menu,Object(r.a)({moduleId:e.moduleId,subModuleId:e.subModuleId,menuGroupId:e.menuGroupId,parentId:e.parentMenuId},e.formData)).success("新增菜单成功",function(u){e.$emit("submit-success",u.records.menu,e),e.resetForm()}).finally(function(){return e.formLoading=!1})})}},created:function(){this.getSubModule(),this.getMenuGroup(),this.getParentMenu()}},m={render:function(){var e=this,u=e.$createElement,a=e._self._c||u;return a("div",{staticClass:"common-padding-all"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"180px",size:"small"}},[a("el-form-item",{attrs:{label:"所属子模块："}},[a("el-input",{attrs:{disabled:""},model:{value:e.subModule.name,callback:function(u){e.$set(e.subModule,"name",u)},expression:"subModule.name"}})],1),e._v(" "),e.menuGroupId?a("el-form-item",{attrs:{label:"菜单组名称："}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.menuGroup.name,callback:function(u){e.$set(e.menuGroup,"name",u)},expression:"menuGroup.name"}})],1):e._e(),e._v(" "),e.parentMenuId?a("el-form-item",{attrs:{label:"父级菜单名称："}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:e.parentMenu.name,callback:function(u){e.$set(e.parentMenu,"name",u)},expression:"parentMenu.name"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称：",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(u){e.$set(e.formData,"name",u)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单唯一标识符：",prop:"value"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(u){e.$set(e.formData,"value",u)},expression:"formData.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标名称：",prop:"iconName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.iconName,callback:function(u){e.$set(e.formData,"iconName",u)},expression:"formData.iconName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否使用选项卡：",prop:"useTab"}},[a("el-switch",{attrs:{"active-value":e.dict.menuUseTabValue.true,"inactive-value":e.dict.menuUseTabValue.false,"active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.useTab,callback:function(u){e.$set(e.formData,"useTab",u)},expression:"formData.useTab"}})],1),e._v(" "),e.formData.useTab===e.dict.menuUseTabValue.true?[a("el-form-item",{attrs:{label:"是否缓存选项卡：",prop:"cacheInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.cacheInTab,callback:function(u){e.$set(e.formData,"cacheInTab",u)},expression:"formData.cacheInTab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在选项卡中默认打开：",prop:"initOpenInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.initOpenInTab,callback:function(u){e.$set(e.formData,"initOpenInTab",u)},expression:"formData.initOpenInTab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可以关闭选项卡：",prop:"closableInTab"}},[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false","active-color":"#13ce66","inactive-color":"#cccccc"},model:{value:e.formData.closableInTab,callback:function(u){e.$set(e.formData,"closableInTab",u)},expression:"formData.closableInTab"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"菜单描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(u){e.$set(e.formData,"description",u)},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),a("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],2)],1)},staticRenderFns:[]},c=a("C7Lr")(d,m,!1,null,null,null);u.default=c.exports}});