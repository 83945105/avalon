webpackJsonp([11,17,25],{"+hZp":function(e,t,l){e.exports=l.p+"gar/img/no_authority_img.85ebcdd.png"},"07O4":function(e,t){},"0Eir":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("qSEq"),i=l("3TTE"),a=l("13vy"),n=l("ELdc"),r={likeText:""},s={name:"resource-tree",mixins:[o.b,i.a],props:{moduleId:{type:String,required:!0},queryParams:Object,queryChildParams:Object},data:function(){return{params:Object(n.a)({},r),treeAsyncProps:{label:"name",isLeaf:"leaf",children:"children",disabled:"disabled"},treeAsyncNodeKey:"id"}},methods:{append:function(e,t){if(t){e=this.formatterTreeAsyncRow(e,{formatterRow:function(e){return e.expanded=!1},formatterNodeIsLeaf:function(e){return 0===e.childCount}});var l=this.$refs[this.treeAsyncRef];l.append(e,l.getNode(t))}},insertAfterRoot:function(e){e=this.formatterTreeAsyncRow(e,{formatterRow:function(e){return e.expanded=!1},formatterNodeIsLeaf:function(e){return 0===e.childCount}});var t=this.$refs[this.treeAsyncRef];t.insertAfter(e,t.getNode(this.treeAsyncRows[this.treeAsyncRows.length-1]))},getCheckedNodes:function(e,t){return this.$refs[this.treeAsyncRef].getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.$refs[this.treeAsyncRef].getCheckedKeys(e)},getTreeAsyncRows:function(){var e=this;this.$emit("check",{},{checkedNodes:[],checkedKeys:[],halfCheckedKeys:[],halfCheckedNodes:[]},this),this.treeAsyncLoading=!0;var t=Object(n.a)({moduleId:this.moduleId},this.params);this.queryParams&&Object(n.a)(t,this.queryParams),this.$Ajax.get(a.a.get.listRootResource,t).success(!0,function(t){e.treeAsyncSkeleton=!1,e.$nextTick(function(){e.treeAsyncRows=e.formatterTreeAsyncRows(t.rows,{formatterRow:function(e){return e.expanded=!1},formatterNodeIsLeaf:function(e){return 0===e.childCount}})})}).notSuccess(function(){return e.treeAsyncSkeleton=500}).catch(function(){return e.treeAsyncSkeleton=500}).finally(function(){return e.treeAsyncLoading=!1})},getTreeAsyncNodes:function(e,t){var l=this,o={moduleId:this.moduleId};this.queryChildParams&&Object(n.a)(o,this.queryChildParams),e.level>=1&&this.$Ajax.get(a.a.get.listResourceByParentId,[e.data.id],{params:o}).success(!0,function(e){var o=l.formatterTreeAsyncRows(e.rows,{formatterRow:function(e){return e.expanded=!1},formatterNodeIsLeaf:function(e){return 0===e.childCount}});t(o)})},handleCheckTreeAsyncNode:function(e,t){this.$emit("check",e,t,this)},handleDblClickTreeAsyncNode:function(e){var t=e.node;e.data.childCount>0&&(t.expanded?t.collapse():t.expand())}},created:function(){this.getTreeAsyncRows()}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",[l("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",clearable:"",placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:e.params.likeText,callback:function(t){e.$set(e.params,"likeText",t)},expression:"params.likeText"}}),e._v(" "),l("span",{staticClass:"btn-p-left"},[l("el-button",{attrs:{type:"success",size:"small",loading:e.treeAsyncLoading},on:{click:e.getTreeAsyncRows}},[e._v("根节点搜索")])],1)],1),e._v(" "),l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.treeAsyncLoading&&!1===e.treeAsyncSkeleton,expression:"treeAsyncLoading && treeAsyncSkeleton === false"}],staticClass:"tree-module-default text-selection",staticStyle:{width:"480px","margin-top":"5px"}},[l("el-autocomplete",{staticStyle:{width:"50%"},attrs:{disabled:"",size:"small",placeholder:"定位资源",debounce:1e3,"value-key":"locationName","prefix-icon":"el-icon-search"}}),e._v(" "),l("we-skeleton",{attrs:{animation:"","paragraph-rows":8},on:{reload:e.getTreeAsyncRows},model:{value:e.treeAsyncSkeleton,callback:function(t){e.treeAsyncSkeleton=t},expression:"treeAsyncSkeleton"}},[l("el-tree",{ref:e.treeAsyncRef,attrs:{data:e.treeAsyncRows,props:e.treeAsyncProps,"node-key":e.treeAsyncNodeKey,lazy:!0,load:e.getTreeAsyncNodes,"expand-on-click-node":!1,"check-strictly":!0,"show-checkbox":"","empty-text":"暂无资源","highlight-current":""},on:{check:e.handleCheckTreeAsyncNode},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,i=t.data;return l("span",{},[o.expanded||i.type!==e.dict.resourceTypeValue.NODE?o.expanded&&i.type===e.dict.resourceTypeValue.NODE?l("i",{staticClass:"we-icon-folder-open-o"}):i.type===e.dict.resourceTypeValue.URL?l("i",{staticClass:"we-icon-link"}):i.type===e.dict.resourceTypeValue.PERMISSION?l("i",{staticClass:"we-icon-jurisdiction-shield"}):e._e():l("i",{staticClass:"we-icon-folder-o"}),e._v(" "),l("span",{on:{dblclick:function(t){e.handleDblClickTreeAsyncNode({node:o,data:i})}}},[e._v(e._s(o.label))])])}}])})],1)],1)])},staticRenderFns:[]};var c=l("C7Lr")(s,d,!1,function(e){l("BZEc")},"data-v-2c5673fc",null);t.default=c.exports},"13vy":function(e,t,l){"use strict";var o=l("Nj3f"),i={get:{listResource:o.a+"/api-gar-resource/get/list/resource",pageListResource:o.a+"/api-gar-resource/get/pageList/resource",listRootResource:o.a+"/api-gar-resource/get/list/rootResource",pageListRootResource:o.a+"/api-gar-resource/get/pageList/rootResource",listResourceByParentId:o.a+"/api-gar-resource/get/list/resourceByParentId/{parentId}",listResourceIdAndNameByResourceIds:o.a+"/api-gar-resource/get/list/resourceIdAndNameByResourceIds/{resourceIds}"},post:{resource:o.a+"/api-gar-resource/post/resource"},put:{resourceByResourceId:o.a+"/api-gar-resource/put/resourceByResourceId/{resourceId}"},delete:{resourceByResourceId:o.a+"/api-gar-resource/delete/resourceByResourceId/{resourceId}",listResourceByResourceIds:o.a+"/api-gar-resource/delete/list/resourceByResourceIds/{resourceIds}"}};t.a=i},"29J1":function(e,t,l){e.exports=l.p+"gar/img/no_data_img.869b577.png"},"3TTE":function(e,t,l){"use strict";t.a={data:function(){return{treeAsyncProps:{label:"name",isLeaf:"leaf",children:"children",disabled:"disabled"},treeAsyncNodeKey:"id",treeAsyncRef:"treeAsync",treeAsyncSkeleton:!0,treeAsyncLoading:!1,treeAsyncRows:[],treeAsyncNodeDeleteLoading$:"delete_loading$",treeAsyncShowAdd:!1,treeAsyncAddLoading:!1,treeAsyncShowEdit:!1,treeAsyncEditLoading:!1,treeAsyncSelectedNode:{},treeAsyncSelectedNodeData:{},treeAsyncAutoExpandKeys:[]}},methods:{formatterTreeAsyncRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=t.formatterRow,o=t.formatterNodeIsLeaf,i=t.formatterNodeChildren;return e[this.treeAsyncNodeDeleteLoading$]=!1,l&&l(e),e[this.treeAsyncProps.isLeaf]=!o||o(e),e[this.treeAsyncProps.children]=i?i(e):[],e},formatterTreeAsyncRows:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=l.formatterRow,i=l.formatterNodeIsLeaf;return e.forEach(function(e){return t.formatterTreeAsyncRow(e,{formatterRow:o,formatterNodeIsLeaf:i})}),e},findRow:function(e,t){if(e&&0!==e.length&&t){var l=void 0;for(var o in e){if(""+e[o][this.treeAsyncNodeKey]==""+t)return e[o];if(l=this.findRow(e[o][this.treeAsyncProps.children],t))return l}}},isTreeAsyncRowHasChildren:function(e){return e[this.treeAsyncProps.children]&&e[this.treeAsyncProps.children].length>0},setTreeAsyncRowChildren:function(e,t){t&&(e[this.treeAsyncProps.children]=t)},addTreeAsyncRowChild:function(e,t){t&&(e[this.treeAsyncProps.children]||this.$set(e,this.treeAsyncProps.children,[]),e[this.treeAsyncProps.children].push(t))},expandTreeNodeByKeys:function(e){var t=e.key;this.$refs[this.treeAsyncRef].store.nodesMap[t].expand()}}}},BBDL:function(e,t,l){"use strict";var o=l("IHPB"),i=l.n(o),a=l("rVsN"),n=l.n(a),r=l("ELdc"),s=l("C6mD"),d={tableCellEditRef:"tableCellEdit",tableCellEditProps:[],tableCellEditSize:"medium",tableCellEditBlurSaveEdit:!0,tableCellEditChangeSaveEdit:!0,tableCellEditSkeleton:!0,tableCellEditLoading:!1,tableCellEditRows:[],tableCellEditRowDeleteLoading$:"delete_loading$",tableCellEditRowColumnEditSuffix$:"_edit$",tableCellEditRowColumnEditValueSuffix$:"_editValue$",tableCellEditRowColumnEditLoading$:"_edit_loading$",tableCellEditShowAdd:!1,tableCellEditAddLoading:!1,tableCellEditShowEdit:!1,tableCellEditEditLoading:!1,tableCellEditEditRow:{},tableCellEditEditIndex:-1};t.a={props:{reloadTableCellEdit:Function},data:function(){return Object(r.a)({},d)},computed:{tableCellEditCount:function(){var e=this,t=0;return this.tableCellEditRows.forEach(function(l){e.tableCellEditProps.forEach(function(o){!0===l[""+o+e.tableCellEditRowColumnEditSuffix$]&&t++})}),t}},methods:{formatterTableCellEditRow:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).formatterCell;return e[this.tableCellEditRowDeleteLoading$]=!1,l.forEach(function(l){e[""+l+t.tableCellEditRowColumnEditSuffix$]=!1,e[""+l+t.tableCellEditRowColumnEditValueSuffix$]=e[l],e[""+l+t.tableCellEditRowColumnEditLoading$]=!1,o&&o(e,l)}),e},formatterTableCellEditRows:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.formatterRow,a=o.formatterCell;return e.forEach(function(e){i&&i(e),t.formatterTableCellEditRow(e,l,{formatterCell:a})}),e},reloadTableCellEditRows:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=t.formatterRow,o=t.formatterCell;Object(s.f)(this.reloadTableCellEdit)&&(this.tableCellEditLoading=!0,new n.a(this.reloadTableCellEdit).then(function(t){e.tableCellEditLoading=!1,e.tableCellEditSkeleton=!1,e.tableCellEditRows=e.formatterTableCellEditRows(t,e.tableCellEditProps,{formatterRow:l,formatterCell:o})}).catch(function(t){e.tableCellEditLoading=!1,e.tableCellEditSkeleton=500}))},appendTableCellEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,l=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).formatterCell;this.tableCellEditRows.push(this.formatterTableCellEditRow(e,t,{formatterCell:l}))},appendTableCellEditRows:function(e){var t,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.formatterRow,n=o.formatterCell;(t=this.tableCellEditRows).push.apply(t,i()(this.formatterTableCellEditRows(e,l,{formatterRow:a,formatterCell:n})))},removeTableCellEditRow:function(e){if(e)for(var t=0;t<this.tableCellEditRows.length;t++)if(e===this.tableCellEditRows[t])return void this.tableCellEditRows.splice(t,1)},removeTableCellEditRows:function(e){if(e&&0!==e.length)for(var t=0;t<this.tableCellEditRows.length;t++)for(var l in e)if(e[l]===this.tableCellEditRows[t]){this.tableCellEditRows.splice(t,1),t--;break}},handleCloseLoadingTableCellEditRowColumn:function(e,t){e[""+t+this.tableCellEditRowColumnEditLoading$]=!1},handleCloseLoadingTableCellEditRowColumns:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleCloseLoadingTableCellEditRowColumn(e,l)})},handleCloseEditAndLoadingTableCellEditRowColumn:function(e,t){e[""+t+this.tableCellEditRowColumnEditSuffix$]=!1,e[""+t+this.tableCellEditRowColumnEditLoading$]=!1},handleCloseEditAndLoadingTableCellEditRowColumns:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleCloseEditAndLoadingTableCellEditRowColumn(e,l)})},handleCloseAllEditAndLoadingTableCellEditRowColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableCellEditProps;this.tableCellEditRows.forEach(function(l){return e.handleCloseEditAndLoadingTableCellEditRowColumns(l,t)})},handleConfirmCloseAllTableCellEdit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableCellEditProps;return new n.a(function(l,o){0!==e.tableCellEditCount?e.$confirm({content:"是否取消编辑中的单元格?",onClickConfirmButton:function(o,i){e.handleCloseAllEditAndLoadingTableCellEditRowColumns(t),i.close(),l()}}):l()})},handleOpenTableCellEditRowColumnEdit:function(e,t){-1!==this.tableCellEditProps.indexOf(t)&&(e[""+t+this.tableCellEditRowColumnEditSuffix$]=!0)},handleOpenTableCellEditRowColumnsEdit:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleOpenTableCellEditRowColumnEdit(e,l)})},handleOpenTableCellEditRowColumnLoading:function(e,t){e[""+t+this.tableCellEditRowColumnEditLoading$]=!0},handleOpenTableCellEditRowColumnsLoading:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleOpenTableCellEditRowColumnLoading(e,l)})},isTableCellEditRowColumnChange:function(e,t){return e[""+t+this.tableCellEditRowColumnEditValueSuffix$]!==e[t]},isTableCellEditRowChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t)if(this.isTableCellEditRowColumnChange(e,t[l]))return!0;return!1},getTableCellEditChangeRowColumnNewValues:function(e){var t=this,l={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(o){t.isTableCellEditRowColumnChange(e,o)&&(l[o]=e[""+o+t.tableCellEditRowColumnEditValueSuffix$])}),l},restoreTableCellEditChangeRowColumnValue:function(e,t){this.isTableCellEditRowColumnChange(e,t)&&(e[""+t+this.tableCellEditRowColumnEditValueSuffix$]=e[t])},restoreTableCellEditChangeRowColumnsValue:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.restoreTableCellEditChangeRowColumnValue(e,l)})},restoreTableCellEditChangeRowColumnValueAndCloseEdit:function(e,t){this.isTableCellEditRowColumnChange(e,t)&&(e[""+t+this.tableCellEditRowColumnEditValueSuffix$]=e[t]),e[""+t+this.tableCellEditRowColumnEditSuffix$]=!1},restoreTableCellEditChangeRowColumnsValueAndCloseEdit:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.restoreTableCellEditChangeRowColumnValueAndCloseEdit(e,l)})},syncTableCellEditRowColumnEditValue:function(e,t){this.isTableCellEditRowColumnChange(e,t)&&(e[t]=e[""+t+this.tableCellEditRowColumnEditValueSuffix$])},syncTableCellEditRowColumnsEditValue:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.syncTableCellEditRowColumnEditValue(e,l)})},handleBlurTableCellEditColumnChange:function(e){this.tableCellEditBlurSaveEdit&&(this.isTableCellEditRowColumnChange(e.row,e.column.property)?this.handleSaveTableCellEdit(e):this.restoreTableCellEditChangeRowColumnValueAndCloseEdit(e.row,e.column.property))},isEnableTableCellEditConfirmEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t){if(e.row[""+t[l]+this.tableCellEditRowColumnEditLoading$])return!1;if(!e.row[""+t[l]+this.tableCellEditRowColumnEditSuffix$])return!0}return!1},isEnableTableCellEditCancelEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t){if(e.row[""+t[l]+this.tableCellEditRowColumnEditLoading$])return!1;if(e.row[""+t[l]+this.tableCellEditRowColumnEditSuffix$])return!0}return!1},isEnableTableCellEditSaveEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t){if(e.row[""+t[l]+this.tableCellEditRowColumnEditLoading$])return!1;if(e.row[""+t[l]+this.tableCellEditRowColumnEditSuffix$]&&this.isTableCellEditRowColumnChange(e.row,t[l]))return!0}return!1}}}},BZEc:function(e,t){},Eaeu:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("qSEq"),i=l("ELdc"),a=l("px6D"),n=l("13vy"),r={name:"",type:"",url:"",path:"",description:"",permission:"",status:""},s={name:"resource-add",components:{ResourceTree:l("0Eir").default},mixins:[o.b],props:{moduleId:{type:String,required:!0}},data:function(){return{formLoading:!1,formData:Object(i.a)({},r,{type:o.a.dict.resourceTypeValue.URL,status:o.a.dict.statusValue.NORMAL}),formRules:{name:[{required:!0,message:"请输入资源名称",trigger:"blur"},{min:2,max:64,message:"长度在 2 到 64 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择资源类型",trigger:"change"}],url:[{required:!0,message:"请输入资源地址",trigger:"blur"}],permission:[{required:!0,message:"请输入资源许可",trigger:"blur"}]},roleList:[],roleLoading:!1,roleIds:[],isIndeterminateRoles:!1,isCheckAllRoles:!1}},methods:{getRoleList:function(){var e=this;this.roleLoading=!0,this.$Ajax.get(a.a.get.listRole,{moduleId:this.moduleId}).success(!0,function(t){e.roleList=t.rows}).finally(function(){return e.roleLoading=!1})},handleCheckAllRoles:function(e){this.isIndeterminateRoles=!1,this.roleIds=e?this.roleList.map(function(e){return e.id}):[]},handleCheckRoles:function(e){var t=e.length;this.isCheckAllRoles=t===this.roleList.length,this.isIndeterminateRoles=t>0&&t<this.roleList.length},submit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.formLoading=!0;var l=Object(i.a)({moduleId:e.moduleId},e.formData);e.roleIds.length>0&&(l.roleIdSet=e.roleIds.toString());var o=e.$refs.resourceTree.getCheckedKeys();o.length>0&&(l.parentIdSet=o.toString()),e.$Ajax.post(n.a.post.resource,l).success("新建资源成功",function(t){var l=t.rows;l&&l.length>0&&l.forEach(function(t){if(t.type!==e.dict.resourceTypeValue.NODE)return!0;t.parentId?e.$refs.resourceTree.append(t,t.parentId):e.$refs.resourceTree.insertAfterRoot(t)}),e.$emit("submit-success",t,e)}).finally(function(){return e.formLoading=!1})}})}},created:function(){this.getRoleList()}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",staticStyle:{margin:"30px 30px 30px 30px"},attrs:{model:e.formData,rules:e.formRules,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[l("el-input",{attrs:{placeholder:"请输入资源名称",size:"small"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"资源类型",prop:"type"}},[l("el-select",{attrs:{placeholder:"请选择资源类型",size:"small"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.dict.resourceTypes,function(t,o){return l("el-option",{key:o,attrs:{label:t.label,title:t.value,value:t.value}},[t.value===e.dict.resourceTypeValue.NODE?l("i",{staticClass:"we-icon-folder-o"}):t.value===e.dict.resourceTypeValue.URL?l("i",{staticClass:"we-icon-link"}):t.value===e.dict.resourceTypeValue.PERMISSION?l("i",{staticClass:"we-icon-jurisdiction-shield"}):e._e(),e._v(" "),l("span",[e._v(e._s(t.label))])])}),1)],1),e._v(" "),e.formData.type===e.dict.resourceTypeValue.URL?l("el-form-item",{attrs:{label:"资源地址",prop:"url"}},[l("el-input",{attrs:{placeholder:"请输入资源请求地址URL(相对路径,不包含项目根路径,以 / 开头)",size:"small"},model:{value:e.formData.url,callback:function(t){e.$set(e.formData,"url",t)},expression:"formData.url"}})],1):e._e(),e._v(" "),e.formData.type===e.dict.resourceTypeValue.PERMISSION?l("el-form-item",{attrs:{label:"资源许可",prop:"permission"}},[l("el-input",{attrs:{placeholder:"请输入资源许可(用于Shiro注解)",size:"small"},model:{value:e.formData.permission,callback:function(t){e.$set(e.formData,"permission",t)},expression:"formData.permission"}})],1):e._e(),e._v(" "),l("el-form-item",{attrs:{label:"资源描述",prop:"description"}},[l("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入资源描述",size:"small"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),e.formData.type!==e.dict.resourceTypeValue.NODE?l("el-form-item",{attrs:{label:"立即使用",prop:"status"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1):e._e(),e._v(" "),e.formData.type!==e.dict.resourceTypeValue.NODE?l("el-form-item",{directives:[{name:"loading",rawName:"v-loading",value:e.roleLoading,expression:"roleLoading"}],attrs:{label:"选择角色",prop:"roleIds"}},[l("el-checkbox",{attrs:{indeterminate:e.isIndeterminateRoles},on:{change:e.handleCheckAllRoles},model:{value:e.isCheckAllRoles,callback:function(t){e.isCheckAllRoles=t},expression:"isCheckAllRoles"}},[e._v("全选\n    ")]),e._v(" "),l("el-checkbox-group",{attrs:{size:"small"},on:{change:e.handleCheckRoles},model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},[l("ul",{staticClass:"button-list"},e._l(e.roleList,function(t){return l("li",[l("el-checkbox",{attrs:{label:t.id,title:t.value,disabled:t.status===e.dict.statusValue.DISABLED,border:""}},[e._v(e._s(t.name)+"\n          ")])],1)}),0)])],1):e._e(),e._v(" "),l("el-form-item",{attrs:{label:"所属节点",prop:"roles"}},[l("resource-tree",{ref:"resourceTree",attrs:{"module-id":e.moduleId,"query-params":{typeSet:e.dict.resourceTypeValue.NODE,childTypeSet:e.dict.resourceTypeValue.NODE},"query-child-params":{typeSet:e.dict.resourceTypeValue.NODE,childTypeSet:e.dict.resourceTypeValue.NODE}}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),l("el-button",{attrs:{disabled:e.formLoading},on:{click:function(t){e.$refs.form.resetFields()}}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var c=l("C7Lr")(s,d,!1,function(e){l("N3y+")},"data-v-d1956a5c",null);t.default=c.exports},Kgiw:function(e,t,l){e.exports=l.p+"gar/img/no_page_img.cccfdce.png"},"N3y+":function(e,t){},elhn:function(e,t,l){"use strict";var o={name:"error-page",componentName:"ErrorPage",optionName:"errorPage",props:{type:{type:[String,Number],default:"noData"},title:String,imageWidth:{type:Number,default:200},imageHeight:{type:Number,default:200}},computed:{__title__:function(){return this.title?this.title:403===this.type||"403"===this.type?"抱歉您无权查看此页面。":404===this.type||"404"===this.type?"抱歉，您访问的页面不存在。":500===this.type||"500"===this.type?"抱歉，您的网络有问题加载失败。":"抱歉暂无信息。"}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"global-no-data"},[e._t("default",[403===e.type||"403"===e.type?o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("+hZp")}}):404===e.type||"404"===e.type?o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("29J1")}}):500===e.type||"500"===e.type?o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("Kgiw")}}):o("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("29J1")}})]),e._v(" "),o("div",{staticClass:"global-no-data-text",class:{"is-margin-top":0!==e.imageWidth&&0!==e.imageHeight}},[e._t("title",[o("span",[e._v(e._s(e.__title__))])])],2),e._v(" "),o("div",{staticClass:"global-no-data-button"},[e._t("footer")],2)],2)},staticRenderFns:[]},a=l("C7Lr")(o,i,!1,null,null,null);t.a=a.exports},px6D:function(e,t,l){"use strict";var o=l("Nj3f"),i={get:{validateValueCanUse:o.a+"/api-gar-role/get/validateValueCanUse/{value}",pageListRole:o.a+"/api-gar-role/get/pageList/role",listRole:o.a+"/api-gar-role/get/list/role"},post:{role:o.a+"/api-gar-role/post/role"},put:{roleByRoleId:o.a+"/api-gar-role/put/roleByRoleId/{roleId}"},delete:{roleByRoleId:o.a+"/api-gar-role/delete/roleByRoleId/{roleId}",listRoleByRoleIds:o.a+"/api-gar-role/delete/list/roleByRoleIds/{roleIds}"}};t.a=i},yEG7:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l("IHPB"),i=l.n(o),a=l("p00s"),n=l.n(a),r=l("rVsN"),s=l.n(r),d=l("qSEq"),c=l("elhn"),u=l("Eaeu"),p=l("BBDL"),m=l("13vy"),h=l("ELdc"),f=l("px6D"),C=l("Nj3f"),b={get:{listRoleResourceByRoleId:C.a+"/api-gar-role-resource/get/list/roleResourceByRoleId/{roleId}",listRoleResourceByResourceId:C.a+"/api-gar-role-resource/get/list/roleResourceByResourceId/{resourceId}"},post:{roleResourceByRoleIdAndResourceId:C.a+"/api-gar-role-resource/post/roleResourceByRoleIdAndResourceId/{roleId}/{resourceId}",listRoleResourceByRoleIdsAndResourceIds:C.a+"/api-gar-role-resource/post/list/roleResourceByRoleIdsAndResourceIds/{roleIds}/{resourceIds}"},delete:{roleResourceByRoleResourceId:C.a+"/api-gar-role-resource/delete/roleResourceByRoleResourceId/{roleResourceId}",listRoleResourceByRoleResourceIds:C.a+"/api-gar-role-resource/delete/list/roleResourceByRoleResourceIds/{roleResourceIds}",roleResourceByRoleIdAndResourceId:C.a+"/api-gar-role-resource/delete/roleResourceByRoleIdAndResourceId/{roleId}/{resourceId}",listRoleResourceByRoleIdsAndResourceIds:C.a+"/api-gar-role-resource/delete/list/roleResourceByRoleIdsAndResourceIds/{roleIds}/{resourceIds}"}},E=l("C6mD"),g={currentPage:1,pageSizes:[10,20,50,100],total:0,pageCount:1},R={likeText:"",typeSet:[d.b.data().dict.resourceTypeValue.URL]},w={components:{ResourceAdd:u.default,ErrorPage:c.a},name:"resource-manage",mixins:[d.b,p.a],data:function(){return{limit:Object(h.a)({pageSize:20},g),params:Object(h.a)({},R),tableCellEditProps:["name","type","url","permission"],tableCellEditSize:"medium",tableCellEditBlurSaveEdit:!1,tableCellEditChangeSaveEdit:!0,roleList:[],checkedResourceList:[]}},props:{moduleId:{type:String,required:!0}},computed:{enabledRoleIds:function(){var e=[];for(var t in this.roleList)this.roleList[t].status===this.dict.statusValue.NORMAL&&e.push(this.roleList[t].id);return e}},methods:{reGetTableCellEditRows:function(){Object(h.a)(this.limit,g),this.getTableCellEditRows()},getTableCellEditRows:function(){var e=this;this.tableCellEditLoading=!0,new s.a(function(t,l){e.$Ajax.get(m.a.get.pageListResource,Object(h.a)({},e.limit,{moduleId:e.moduleId,typeSet:e.params.typeSet.toString()})).success(!0,function(l){Object(h.a)(e.limit,l.limit),t(l.rows)}).notSuccess(function(){return l()}).catch(function(){return l()})}).then(function(t){return new s.a(function(l,o){if(0===t.length)return e.tableCellEditRows=[],void l();var i=[];if(t.forEach(function(e){if(!e.parentIds)return!0;e.parentIds.split("/").forEach(function(e){e&&i.push(e)})}),0===i.length)return e.tableCellEditRows=e.formatterTableCellEditRows(t,e.tableCellEditProps,{formatterRow:function(e){e.parentNames=e.parentId?"获取失败":"-",e.expandSkeleton=!0,e.roleIds=[],e.roleIds_cache=[],e.isIndeterminateRoles=!1,e.isCheckAllRoles=!1,e.checkRolesLoading=!1}}),void l();e.$Ajax.get(m.a.get.listResourceIdAndNameByResourceIds,[i.toString()],{params:{moduleId:e.moduleId}}).success(!0,function(o){var i=o.records;e.tableCellEditRows=e.formatterTableCellEditRows(t,e.tableCellEditProps,{formatterRow:function(e){var t=e.parentIds;if(t){var l="";t.split("/").forEach(function(e){if(!e)return!0;i[e]&&(l+=" / "+i[e])}),e.parentNames=l.substring(3)}else e.parentNames="-";e.expandSkeleton=!0,e.roleIds=[],e.roleIds_cache=[],e.isIndeterminateRoles=!1,e.isCheckAllRoles=!1,e.checkRolesLoading=!1}}),l()}).notSuccess(function(){e.tableCellEditRows=e.formatterTableCellEditRows(t,e.tableCellEditProps,{formatterRow:function(e){e.parentNames=e.parentId?"获取失败":"-",e.expandSkeleton=!0,e.roleIds=[],e.roleIds_cache=[],e.isIndeterminateRoles=!1,e.isCheckAllRoles=!1,e.checkRolesLoading=!1}}),l()})})}).then(function(){return e.tableCellEditSkeleton=!1}).catch(function(){return e.tableCellEditSkeleton=500}).finally(function(){return e.tableCellEditLoading=!1})},handleSaveTableCellEdit:function(e){var t=this,l=e.row,o=e.column,i=(e.$index,this.getTableCellEditChangeRowColumnNewValues(l,[o.property])),a=n()(i);this.handleCloseEditAndLoadingTableCellEditRowColumn(l,o.property),0!==a.length&&(this.handleOpenTableCellEditRowColumnsLoading(l,a),this.$Ajax.put(m.a.put.resourceByResourceId,Object(h.a)({moduleId:this.moduleId,resourceId:l.id},i)).success(!0,function(){t.syncTableCellEditRowColumnEditValue(l,o.property)}).finally(function(){return t.handleCloseLoadingTableCellEditRowColumn(l,o.property)}))},handleSaveTableRowEdit:function(e){var t=this,l=e.row,o=(e.column,e.$index,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps),i=this.getTableCellEditChangeRowColumnNewValues(l,o),a=n()(i);this.handleCloseEditAndLoadingTableCellEditRowColumns(l,o),0!==a.length&&(this.handleOpenTableCellEditRowColumnsLoading(l,a),this.$Ajax.put(m.a.put.resourceByResourceId,Object(h.a)({moduleId:this.moduleId,resourceId:l.id},i)).success(!0,function(){t.syncTableCellEditRowColumnsEditValue(l,a)}).finally(function(){return t.handleCloseLoadingTableCellEditRowColumns(l,o)}))},handleChangeStatus:function(e){var t=this,l=e.row;e.column,e.$index;this.$Ajax.put(m.a.put.resourceByResourceId,{moduleId:this.moduleId,resourceId:l.id,status:l.status}).success(!0).notSuccess(function(){return l.status=l.status===t.dict.statusValue.NORMAL?t.dict.statusValue.DISABLED:t.dict.statusValue.NORMAL})},handleDeleteRow:function(e,t,l){var o=this,i=l.row;l.column,l.$index;i[this.tableCellEditRowDeleteLoading$]=!0,this.$Ajax.delete(m.a.delete.resourceByResourceId,{moduleId:this.moduleId,resourceId:i.id}).before(function(){return i[o.tableCellEditRowDeleteLoading$]=!1}).success("删除成功",function(){t.close(),o.reGetTableCellEditRows()})},handleSelectionChange:function(e){this.checkedResourceList=e},handleClickDeleteCheckedResources:function(){var e=this;this.$confirm({content:'您确定要<span style="color: red">删除</span>选中的资源吗？<p></p>该操作将同时删除<span style="color: red">所有相关数据</span>且<span style="color: red">无法恢复！！！</span>',onClickConfirmButton:function(t,l){l.close();var o=e.$loading({fullScreen:!0,text:"删除中...请稍后"});e.$Ajax.post(m.a.delete.listResourceByResourceIds,{moduleId:e.moduleId,resourceIds:e.checkedResourceList.map(function(e){return e.id}).toString()}).success(!0,function(){return e.reGetTableCellEditRows()}).finally(function(){return o.close()})}})},getRoleList:function(){var e=this;this.$Ajax.get(f.a.get.listRole,{moduleId:this.moduleId}).success(!0,function(t){e.roleList=t.rows})},handleExpandChange:function(e){var t=this;!1!==e.expandSkeleton&&this.$Ajax.get(b.get.listRoleResourceByResourceId,[e.id],{params:{moduleId:this.moduleId}}).success(!0,function(l){if(e.expandSkeleton=!1,l.rows.length>0){var o=l.rows.map(function(e){return e.roleId});e.roleIds=o,e.roleIds_cache=o,Object(E.d)(e.roleIds,t.enabledRoleIds)&&(e.isIndeterminateRoles=!0),Object(E.c)(e.roleIds,t.enabledRoleIds)&&(e.isIndeterminateRoles=!1,e.isCheckAllRoles=!0)}}).notSuccess(function(){return t.expandSkeleton=500}).catch(function(){return e.expandSkeleton=500})},handleCheckAllRoles:function(e,t){var l=e.row;e.column,e.$index;l.isIndeterminateRoles=!1;var o=[];if(t)for(var a in o=[].concat(i()(l.roleIds)),this.roleList)this.roleList[a].status===this.dict.statusValue.NORMAL&&-1===l.roleIds.indexOf(this.roleList[a].id)&&o.push(this.roleList[a].id);else for(var n in this.roleList)this.roleList[n].status===this.dict.statusValue.DISABLED&&-1!==l.roleIds.indexOf(this.roleList[n].id)&&o.push(this.roleList[n].id);l.roleIds=o,this.handleSaveCheckRoles(l,l.roleIds)},handleCheckRoles:function(e,t){var l=e.row;e.column,e.$index;l.isIndeterminateRoles=Object(E.d)(t,this.enabledRoleIds),Object(E.c)(t,this.enabledRoleIds)?(l.isIndeterminateRoles=!1,l.isCheckAllRoles=!0):l.isCheckAllRoles=!1,this.handleSaveCheckRoles(l,t)},handleSaveCheckRoles:function(e,t){var l=this,o=[],i=[],a=e.roleIds_cache,n=[];if(a.forEach(function(e){-1===t.indexOf(e)?o.push(e):n.push(e)}),t.forEach(function(e){-1===a.indexOf(e)&&(i.push(e),n.push(e))}),0!==o.length||0!==i.length){if(o.length>0&&0===i.length)return e.checkRolesLoading=!0,void this.$Ajax.delete(b.delete.listRoleResourceByRoleIdsAndResourceIds,{moduleId:this.moduleId,roleIds:o.toString(),resourceIds:e.id}).success(!0,function(){return e.roleIds_cache=n}).finally(function(){return e.checkRolesLoading=!1});if(i.length>0&&0===o.length)return e.checkRolesLoading=!0,void this.$Ajax.post(b.post.listRoleResourceByRoleIdsAndResourceIds,{moduleId:this.moduleId,roleIds:i.toString(),resourceIds:e.id}).success(!0,function(){return e.roleIds_cache=n}).finally(function(){return e.checkRolesLoading=!1});e.checkRolesLoading=!0,new s.a(function(t,i){l.$Ajax.delete(b.delete.listRoleResourceByRoleIdsAndResourceIds,{moduleId:l.moduleId,roleIds:o.toString(),resourceIds:e.id}).success(!0,t).notSuccess(function(){return e.checkRolesLoading=!1})}).then(function(){l.$Ajax.post(b.post.listRoleResourceByRoleIdsAndResourceIds,{moduleId:l.moduleId,roleIds:i.toString(),resourceIds:e.id}).success(!0,function(){return e.roleIds_cache=n}).finally(function(){return e.checkRolesLoading=!1})})}},handleDbClickCell:function(e,t,l,o){e.type===this.dict.resourceTypeValue.NODE&&"name"!==t.property||e.type===this.dict.resourceTypeValue.URL&&"permission"===t.property||e.type===this.dict.resourceTypeValue.PERMISSION&&"url"===t.property||this.handleOpenTableCellEditRowColumnEdit(e,t.property)}},created:function(){this.getRoleList(),this.getTableCellEditRows()}},y={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"avalon-merlin-default-search-bar avalon-merlin-a-scroll"},[l("div",{staticClass:"avalon-merlin-lfloat"},[l("span",{staticClass:"btn-p-left"},[l("el-select",{staticStyle:{width:"360px"},attrs:{size:"small",multiple:"",placeholder:"请选择资源类型"},model:{value:e.params.typeSet,callback:function(t){e.$set(e.params,"typeSet",t)},expression:"params.typeSet"}},e._l(e.dict.resourceTypes,function(e,t){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("span",{staticClass:"btn-p-left"},[l("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"请输入关键字","prefix-icon":"el-icon-search"},model:{value:e.params.likeText,callback:function(t){e.$set(e.params,"likeText",t)},expression:"params.likeText"}})],1),e._v(" "),l("span",{staticClass:"btn-p-left"},[l("we-button",{attrs:{loading:e.tableCellEditLoading,size:"small"},on:{click:function(t){e.handleConfirmCloseAllTableCellEdit().then(e.reGetTableCellEditRows)}}},[e._v("搜索")])],1),e._v(" "),l("span",{staticClass:"btn-p-left"},[l("we-button",{attrs:{disabled:"",type:"danger",size:"small"}},[e._v("\n          资源树(F2)\n        ")])],1),e._v(" "),l("span",{staticClass:"btn-p-left"},[l("we-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleConfirmCloseAllTableCellEdit().then(function(){return e.tableCellEditShowAdd=!0})}}},[e._v("新建资源")])],1)])]),e._v(" "),l("div",{staticClass:"list-tools avalon-merlin-hidden"},[l("el-button",{attrs:{type:"danger",size:"small",disabled:0===e.checkedResourceList.length},on:{click:e.handleClickDeleteCheckedResources}},[e._v("删除选中资源\n    ")]),e._v(" "),l("el-button",{attrs:{type:"warning",size:"small",disabled:0===e.tableCellEditCount},on:{click:function(t){e.handleCloseAllEditAndLoadingTableCellEditRowColumns(e.tableCellEditProps)}}},[e._v("取消所有编辑\n    ")])],1),e._v(" "),l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableCellEditLoading&&!1===e.tableCellEditSkeleton,expression:"tableCellEditLoading && tableCellEditSkeleton === false"}],staticClass:"avalon-merlin-default-list"},[l("we-skeleton",{attrs:{animation:"","paragraph-rows":8},on:{reload:e.getTableCellEditRows},model:{value:e.tableCellEditSkeleton,callback:function(t){e.tableCellEditSkeleton=t},expression:"tableCellEditSkeleton"}},[l("el-table",{attrs:{data:e.tableCellEditRows,size:e.tableCellEditSize,fit:"",height:"100%"},on:{"expand-change":e.handleExpandChange,"cell-dblclick":e.handleDbClickCell,"selection-change":e.handleSelectionChange}},[l("template",{slot:"empty"},[l("error-page",{attrs:{"image-width":180,"image-height":180}})],1),e._v(" "),l("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),e.roleList&&e.roleList.length>0?l("el-table-column",{attrs:{type:"expand",label:"所属角色列表",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.type===e.dict.resourceTypeValue.NODE?[e._v("节点不能授予角色")]:l("we-skeleton",{attrs:{animation:""},on:{reload:function(l){e.handleExpandChange(t.row)}},model:{value:t.row.expandSkeleton,callback:function(l){e.$set(t.row,"expandSkeleton",l)},expression:"scope.row.expandSkeleton"}},[l("span",{directives:[{name:"loading",rawName:"v-loading",value:t.row.checkRolesLoading,expression:"scope.row.checkRolesLoading"}],staticStyle:{display:"block"}},[l("el-checkbox",{staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{indeterminate:t.row.isIndeterminateRoles,disabled:t.row.checkRolesLoading},on:{change:function(l){return e.handleCheckAllRoles(t,l)}},model:{value:t.row.isCheckAllRoles,callback:function(l){e.$set(t.row,"isCheckAllRoles",l)},expression:"scope.row.isCheckAllRoles"}},[e._v("全选\n                ")]),e._v(" "),l("el-tag",{staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{size:"small"}},[e._v("点击按钮可以将当前资源授予点击角色")]),e._v(" "),l("el-checkbox-group",{attrs:{size:"small"},on:{change:function(l){return e.handleCheckRoles(t,l)}},model:{value:t.row.roleIds,callback:function(l){e.$set(t.row,"roleIds",l)},expression:"scope.row.roleIds"}},[e._l(e.roleList,function(o){return[l("el-checkbox",{staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{label:o.id,title:o.value,disabled:t.row.checkRolesLoading||o.status===e.dict.statusValue.DISABLED,border:""}},[e._v(e._s(o.name))])]})],2)],1)])]}}])}):e._e(),e._v(" "),l("el-table-column",{attrs:{prop:"parentNames",label:"所属节点","column-key":"parentNames",align:"center","show-overflow-tooltip":"",formatter:function(e,t,l,o){return e[t.property]?e[t.property]:"-"}},scopedSlots:e._u([{key:"header",fn:function(t){return[l("span",[e._v(e._s(t.column.label))]),e._v(" "),l("we-icon",{attrs:{name:"folder-o"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"资源名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n              value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n              size: 'mini'\n            }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("we-tooltip",{attrs:{disabled:e.tableCellEditBlurSaveEdit,placement:"top-start",effect:"light"}},[l("template",{slot:"content"},[l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],type:"text",size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValueAndCloseEdit(t.row,t.column.property)}}},[e._v("关闭")]),e._v(" "),l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]||!e.isTableCellEditRowColumnChange(t.row,t.column.property),size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValue(t.row,t.column.property)}}},[e._v("还原")]),e._v(" "),l("we-button",{attrs:{loading:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],disabled:!e.isTableCellEditRowColumnChange(t.row,t.column.property),type:"primary",size:"mini"},on:{click:function(l){e.handleSaveTableCellEdit(t)}}},[e._v("保存")])],1),e._v(" "),l("el-input",{attrs:{placeholder:"请输入"+t.column.label,size:e.tableCellEditSize},on:{blur:function(l){e.handleBlurTableCellEditColumnChange(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})],2)]:[e._v(e._s(t.row[t.column.property]))]],2)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"type",label:"资源类型",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.type===e.dict.resourceTypeValue.NODE?[e._v("\n              "+e._s(e.dict.resourceTypeLabel[t.row[t.column.property]])+"\n            ")]:[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n                value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n                size: 'mini'\n              }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("el-select",{attrs:{placeholder:"请选择"+t.column.label,size:e.tableCellEditSize},on:{change:function(){!0===e.tableCellEditChangeSaveEdit&&e.handleSaveTableCellEdit(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}},e._l(e.dict.resourceTypes,function(t,o){return t.value!==e.dict.resourceTypeValue.NODE?l("el-option",{key:o,attrs:{label:t.label,value:t.value}},[t.value===e.dict.resourceTypeValue.NODE?l("i",{staticClass:"we-icon-folder-o"}):t.value===e.dict.resourceTypeValue.URL?l("i",{staticClass:"we-icon-link"}):t.value===e.dict.resourceTypeValue.PERMISSION?l("i",{staticClass:"we-icon-jurisdiction-shield"}):e._e(),e._v(" "),l("span",[e._v(e._s(t.label))])]):e._e()}),1)]:[e._v(e._s(e.dict.resourceTypeLabel[t.row[t.column.property]]))]],2)]]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"url",label:"统一资源定位符","header-align":"left",align:"left","min-width":"210","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[l("span",[e._v(e._s(t.column.label))]),e._v(" "),l("we-icon",{attrs:{name:"link"}})]}},{key:"default",fn:function(t){return[t.row.type!==e.dict.resourceTypeValue.URL?void 0:[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n              value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n              size: 'mini'\n            }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("we-tooltip",{attrs:{disabled:e.tableCellEditBlurSaveEdit,placement:"top-start",effect:"light"}},[l("template",{slot:"content"},[l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],type:"text",size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValueAndCloseEdit(t.row,t.column.property)}}},[e._v("关闭")]),e._v(" "),l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]||!e.isTableCellEditRowColumnChange(t.row,t.column.property),size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValue(t.row,t.column.property)}}},[e._v("还原")]),e._v(" "),l("we-button",{attrs:{loading:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],disabled:!e.isTableCellEditRowColumnChange(t.row,t.column.property),type:"primary",size:"mini"},on:{click:function(l){e.handleSaveTableCellEdit(t)}}},[e._v("保存")])],1),e._v(" "),l("el-input",{attrs:{placeholder:"请输入"+t.column.label,size:e.tableCellEditSize},on:{blur:function(l){e.handleBlurTableCellEditColumnChange(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})],2)]:[e._v(e._s(t.row[t.column.property]))]],2)]]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"permission",label:"资源许可","header-align":"left",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[l("span",[e._v(e._s(t.column.label))]),e._v(" "),l("we-icon",{attrs:{name:"jurisdiction-shield"}})]}},{key:"default",fn:function(t){return[t.row.type!==e.dict.resourceTypeValue.PERMISSION?void 0:[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n                value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n                size: 'mini'\n              }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("we-tooltip",{attrs:{disabled:e.tableCellEditBlurSaveEdit,placement:"top-start",effect:"light"}},[l("template",{slot:"content"},[l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],type:"text",size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValueAndCloseEdit(t.row,t.column.property)}}},[e._v("关闭")]),e._v(" "),l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]||!e.isTableCellEditRowColumnChange(t.row,t.column.property),size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValue(t.row,t.column.property)}}},[e._v("还原")]),e._v(" "),l("we-button",{attrs:{loading:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],disabled:!e.isTableCellEditRowColumnChange(t.row,t.column.property),type:"primary",size:"mini"},on:{click:function(l){e.handleSaveTableCellEdit(t)}}},[e._v("保存")])],1),e._v(" "),l("el-input",{attrs:{placeholder:"请输入"+t.column.label,size:e.tableCellEditSize},on:{blur:function(l){e.handleBlurTableCellEditColumnChange(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})],2)]:[e._v(e._s(t.row[t.column.property]))]],2)]]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},on:{change:function(l){e.handleChangeStatus(t)}},model:{value:t.row.status,callback:function(l){e.$set(t.row,"status",l)},expression:"scope.row.status"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"status",label:"操作",fixed:"right",align:"center",width:"270","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEnableTableCellEditConfirmEditRow(t,e.tableCellEditProps)},on:{click:function(l){e.handleOpenTableCellEditRowColumnsEdit(t.row,e.tableCellEditProps)}}},[e._v("\n              编辑此行\n            ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEnableTableCellEditCancelEditRow(t,e.tableCellEditProps)},on:{click:function(l){e.handleCloseEditAndLoadingTableCellEditRowColumns(t.row,e.tableCellEditProps)}}},[e._v("\n              取消编辑此行\n            ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEnableTableCellEditSaveEditRow(t,e.tableCellEditProps)},on:{click:function(l){e.handleSaveTableRowEdit(t,e.tableCellEditProps)}}},[e._v("\n              保存此行\n            ")]),e._v(" "),l("we-popover",{attrs:{title:"操作",type:"confirm",placement:"top-start",manual:t.row[e.tableCellEditRowDeleteLoading$],"confirm-button-text":"删了吧","cancel-button-text":t.row[e.tableCellEditRowDeleteLoading$]?"你没有想的机会了":"我再想想","cancel-button-options":{disabled:t.row[e.tableCellEditRowDeleteLoading$]},"confirm-button-options":{loading:t.row[e.tableCellEditRowDeleteLoading$]}},on:{"click-cancel-button":function(e,t){return t.close()},"click-confirm-button":function(l,o){return e.handleDeleteRow(l,o,t)}}},[l("template",{slot:"content"},[t.row[e.tableCellEditRowDeleteLoading$]?[l("span",{staticStyle:{color:"red"}},[e._v("删除中...")]),e._v("删除完成后将自动关闭气泡\n                ")]:[e._v("\n                  您确定要"),l("span",{staticStyle:{color:"red"}},[e._v("删除")]),e._v("该资源及其"),l("span",{staticStyle:{color:"red"}},[e._v("所有子资源")]),e._v("吗？\n                  "),l("div",{staticStyle:{color:"red"}},[e._v("删除后不可恢复！！！")])]],2),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])],2)]}}])})],2)],1)],1),e._v(" "),l("div",{staticClass:"avalon-merlin-default-list-page"},[l("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","current-page":e.limit.currentPage,"page-size":e.limit.pageSize,total:e.limit.total,"page-count":e.limit.pageCount,"page-sizes":e.limit.pageSizes},on:{"current-change":function(t){return e.handleConfirmCloseAllTableCellEdit().then(function(){e.limit.currentPage=t,e.getTableCellEditRows()})},"size-change":function(t){return e.handleConfirmCloseAllTableCellEdit().then(function(){e.limit.pageSize=t,e.getTableCellEditRows()})}}})],1),e._v(" "),l("we-layer",{attrs:{title:"新建资源",width:80,height:80,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.tableCellEditShowAdd,callback:function(t){e.tableCellEditShowAdd=t},expression:"tableCellEditShowAdd"}},[l("resource-add",{attrs:{"module-id":e.moduleId}})],1)],1)},staticRenderFns:[]};var v=l("C7Lr")(w,y,!1,function(e){l("07O4")},"data-v-8d3c13aa",null);t.default=v.exports}});