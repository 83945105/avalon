webpackJsonp([26],{PdGq:function(e,a){},alcQ:function(e,a,t){"use strict";a.a={data:function(){return{formRefValue$:"form",formLoading:!1}},methods:{resetForm:function(){this.$refs[this.formRefValue$].resetFields()}}}},px6D:function(e,a,t){"use strict";var r=t("Nj3f"),l={get:{validateValueCanUse:r.a+"/api-gar-role/get/validateValueCanUse/{value}",pageListRole:r.a+"/api-gar-role/get/pageList/role",listRole:r.a+"/api-gar-role/get/list/role"},post:{role:r.a+"/api-gar-role/post/role"},put:{roleByRoleId:r.a+"/api-gar-role/put/roleByRoleId/{roleId}"},delete:{roleByRoleId:r.a+"/api-gar-role/delete/roleByRoleId/{roleId}",listRoleByRoleIds:r.a+"/api-gar-role/delete/list/roleByRoleIds/{roleIds}"}};a.a=l},qgjB:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("qSEq"),l=t("alcQ"),o=t("ELdc"),s=t("px6D"),i=r.b.data(),n={name:"",value:"",type:"",description:"",permission:""},u={name:"role-add",mixins:[r.b,l.a],props:{moduleId:{type:String,required:!0}},data:function(){var e=this;return{rolePrefix:this.moduleId+"_",formData:Object(o.a)({},n,{type:i.dict.roleTypeValue.LOCAL,status:i.dict.statusValue.NORMAL}),formRules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入角色唯一标识符",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"},{validator:function(a,t,r){e.$Ajax.post(s.a.get.validateValueCanUse,{value:""+e.rolePrefix+t,moduleId:e.moduleId}).success(!0,function(e){e.records.canUse?r():r(new Error("角色唯一标识符不可用"))}).fail(!0,function(e){r(new Error(e.resultInfo.message))}).catch(function(){r(new Error("发生错误...请稍后再试"))})},trigger:"blur"}],type:[{required:!0,message:"请选择资源类型",trigger:"change"}]}}},methods:{submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(a){if(a){e.formLoading=!0;var t=Object(o.a)({moduleId:e.moduleId},e.formData,{value:""+e.rolePrefix+e.formData.value});e.$Ajax.post(s.a.post.role,t).success("新建角色成功",function(a){e.resetForm(),e.$emit("submit-success",a.records.role,e)}).finally(function(){return e.formLoading=!1})}})}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"common-padding-all"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{model:e.formData,rules:e.formRules,"label-width":"100px",size:"small"}},[t("el-form-item",{attrs:{label:"角色名称：",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入角色名称",size:"small"},model:{value:e.formData.name,callback:function(a){e.$set(e.formData,"name",a)},expression:"formData.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色标识符：",prop:"value"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{size:"small",disabled:""},model:{value:e.rolePrefix,callback:function(a){e.rolePrefix=a},expression:"rolePrefix"}}),e._v(" "),t("el-input",{staticStyle:{width:"69%",float:"right"},attrs:{placeholder:"请输入角色标识符",size:"small"},model:{value:e.formData.value,callback:function(a){e.$set(e.formData,"value",a)},expression:"formData.value"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色类型：",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择角色类型",size:"small"},model:{value:e.formData.type,callback:function(a){e.$set(e.formData,"type",a)},expression:"formData.type"}},e._l(e.dict.roleTypes,function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"角色描述：",prop:"description"}},[t("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(a){e.$set(e.formData,"description",a)},expression:"formData.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"立即使用：",prop:"status"}},[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},model:{value:e.formData.status,callback:function(a){e.$set(e.formData,"status",a)},expression:"formData.status"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),t("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],1)],1)},staticRenderFns:[]};var m=t("C7Lr")(u,c,!1,function(e){t("PdGq")},"data-v-79b5a9dc",null);a.default=m.exports}});