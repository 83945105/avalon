webpackJsonp([9,12,20,21,28,33,34],{"+hZp":function(e,t,l){e.exports=l.p+"gar/img/no_authority_img.85ebcdd.png"},"29J1":function(e,t,l){e.exports=l.p+"gar/img/no_data_img.869b577.png"},"3fIP":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("qSEq"),i=l("alcQ"),o=l("OSgO"),n=l("Qu/Q"),d=l("AGSt"),s=l("ELdc"),r=a.b.data(),u={subModuleId:"",name:"",value:"",type:"",description:"",status:""},c={name:"template-add",components:{ViewTypeSelect:n.default,SubModuleSelect:o.default},mixins:[a.b,i.a],props:{moduleId:{type:String,required:!0}},data:function(){var e=this;return{formData:Object(s.a)({},u,{type:r.dict.templateTypeValue.VUE_COMPONENT,status:r.dict.statusValue.NORMAL}),formRules:{subModuleId:[{required:!0,message:"请选择所属子模块",trigger:"change"}],name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入模板唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(t,l,a){e.formData.subModuleId?e.$Ajax.get(d.a.get.validateValueCanUseBySubModuleId,[l,e.formData.subModuleId],{params:{moduleId:e.moduleId}}).success(!0,function(e){e.records.canUse?a():a(new Error("模板唯一标识符不可用"))}).fail(!0,function(e){a(new Error(e.resultInfo.message))}).catch(function(){a(new Error("发生错误...请稍后再试"))}):a(new Error("请选择所属子模块"))},trigger:"blur"}],type:[{required:!0,message:"请选择模板类型",trigger:"change"}]}}},methods:{submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.post(d.a.post.template,Object(s.a)({moduleId:e.moduleId},e.formData)).success("新增模板成功",function(t){e.$emit("submit-success",t.records.template,e),e.resetForm()}).finally(function(){return e.formLoading=!1})})}}},m={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"common-padding-all",staticStyle:{"padding-bottom":"0"}},[l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"135px",size:"small"}},[l("el-form-item",{attrs:{label:"所属子模块：",prop:"subModuleId"}},[l("sub-module-select",{attrs:{"module-id":e.moduleId},model:{value:e.formData.subModuleId,callback:function(t){e.$set(e.formData,"subModuleId",t)},expression:"formData.subModuleId"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板名称：",prop:"name"}},[l("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板唯一标识符：",prop:"value"}},[l("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板类型：",prop:"type"}},[l("view-type-select",{attrs:{"init-selected-first":""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板描述：",prop:"description"}},[l("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"立即使用：",prop:"status"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("立即创建")]),e._v(" "),l("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],1)],1)},staticRenderFns:[]},p=l("C7Lr")(c,m,!1,null,null,null);t.default=p.exports},"5K5Q":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("ELdc"),i=l("XAdh"),o=l("Qu/Q"),n=l("AGSt"),d={currentPage:1,pageSizes:[10,20,50,100],total:0,pageCount:1},s={likeText:""},r={name:"template-manage",components:{TemplateCellEditTable:l("EOLF").default,ViewTypeSelect:o.default,SubModuleMultipleSelect:i.default},props:{moduleId:{type:String,required:!0}},data:function(){return{subModuleIdSet:[],viewType:"",limit:Object(a.a)({pageSize:20},d),params:Object(a.a)({},s),loading:!1,moreLoading:!1}},methods:{reload:function(e,t){var l=this;this.loading=!0,Object(a.a)(this.limit,d);var i=Object(a.a)({moduleId:this.moduleId},this.limit,this.params);this.subModuleIdSet.length>0&&(i.subModuleIdSet=this.subModuleIdSet.toString()),this.viewType&&(i.viewType=this.viewType),this.$Ajax.get(n.a.get.pageListTemplate,i).success(!0,function(t){Object(a.a)(l.limit,t.limit),e(t.rows)}).notSuccess(t).catch(t).finally(function(){return l.loading=!1})},loadMore:function(){var e=this;this.moreLoading=!0;var t=Object(a.a)({moduleId:this.moduleId},this.limit,this.params);this.subModuleIdSet.length>0&&(t.subModuleIdSet=this.subModuleIdSet.toString()),this.viewType&&(t.viewType=this.viewType),this.$Ajax.get(n.a.get.pageListTemplate,t).success(!0,function(t){Object(a.a)(e.limit,t.limit),e.$refs.table.appendRows(t.rows)}).finally(function(){return e.moreLoading=!1})},handleTableCellEditAddSuccess:function(e){var t=e.row;e.vm;this.limit.currentPage*this.limit.pageSize>this.limit.total&&this.$refs.table.appendTableCellEditRow(t)}},mounted:function(){this.$refs.table.reloadTableCellEditRows()}},u={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"gar-search-bar"},[l("ul",{staticClass:"gar-search-bar-list"},[l("li",[l("em",{staticClass:"list-left"},[e._v("关键字：")]),e._v(" "),l("div",{staticClass:"list-right common-w-large"},[l("el-input",{attrs:{size:"small",placeholder:"请输入关键字",clearable:""},model:{value:e.params.likeText,callback:function(t){e.$set(e.params,"likeText",t)},expression:"params.likeText"}})],1)]),e._v(" "),l("li",[l("em",{staticClass:"list-left list-label-4"},[e._v("所属子模块：")]),e._v(" "),l("div",{staticClass:"list-right"},[l("sub-module-multiple-select",{attrs:{"module-id":e.moduleId},model:{value:e.subModuleIdSet,callback:function(t){e.subModuleIdSet=t},expression:"subModuleIdSet"}})],1)]),e._v(" "),l("li",[l("em",{staticClass:"list-left list-label-4"},[e._v("模板类型：")]),e._v(" "),l("div",{staticClass:"list-right common-w"},[l("view-type-select",{attrs:{"show-all-option":""},model:{value:e.viewType,callback:function(t){e.viewType=t},expression:"viewType"}})],1)]),e._v(" "),l("li",{staticClass:"spacing"},[l("we-button",{attrs:{loading:e.loading,size:"small"},on:{click:function(t){e.$refs.table.reloadTableCellEditRows()}}},[e._v("查询")])],1)]),e._v(" "),l("div",{staticClass:"common-float-right"},[l("we-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.$refs.table.showAdd()}}},[e._v("新增模板\n      ")])],1),e._v(" "),l("div",{staticClass:"common-clear"})]),e._v(" "),l("div",{staticClass:"gar-list-main",staticStyle:{top:"62px"}},[l("template-cell-edit-table",{ref:"table",attrs:{"module-id":e.moduleId,"reload-table-cell-edit":e.reload},on:{"table-cell-edit-add-success":e.handleTableCellEditAddSuccess}}),e._v(" "),l("div",{staticClass:"gar-paging-infinite is-absolute common-tac"},[l("div",{staticClass:"gar-paging-infinite-inner size-height-small"},[l("we-loading",{attrs:{value:e.moreLoading,size:"mini"}}),e._v(" "),e.limit.currentPage*e.limit.pageSize>e.limit.total?l("span",{staticClass:"common-fc-text-3"},[e._v("没有更多了")]):l("we-button",{attrs:{size:"small",type:"text"},on:{click:function(t){e.limit.currentPage++,e.loadMore()}}},[e._v("加载更多...\n        ")])],1)])],1)])},staticRenderFns:[]},c=l("C7Lr")(r,u,!1,null,null,null);t.default=c.exports},AGSt:function(e,t,l){"use strict";var a=l("Nj3f"),i={get:{validateValueCanUseBySubModuleId:a.a+"/api-gar-template/get/validateValueCanUseBySubModuleId/{value}/{subModuleId}",templateByTemplateId:a.a+"/api-gar-template/get/templateByTemplateId/{templateId}",listTemplate:a.a+"/api-gar-view/get/list/template",pageListTemplate:a.a+"/api-gar-template/get/pageList/template"},post:{template:a.a+"/api-gar-template/post/template"},put:{templateByTemplateId:a.a+"/api-gar-template/put/templateByTemplateId/{templateId}",switchTemplateIndexByTemplateId:a.a+"/api-gar-template/put/switchTemplateIndexByTemplateId/{sourceTemplateId}/{targetTemplateId}"},delete:{templateByTemplateId:a.a+"/api-gar-template/delete/templateByTemplateId/{templateId}",listTemplateByTemplateIds:a.a+"/api-gar-template/delete/list/templateByTemplateIds/{templateIds}"}};t.a=i},BBDL:function(e,t,l){"use strict";var a=l("IHPB"),i=l.n(a),o=l("rVsN"),n=l.n(o),d=l("ELdc"),s=l("C6mD"),r={tableCellEditRef:"tableCellEdit",tableCellEditProps:[],tableCellEditSize:"medium",tableCellEditBlurSaveEdit:!0,tableCellEditChangeSaveEdit:!0,tableCellEditSkeleton:!0,tableCellEditLoading:!1,tableCellEditRows:[],tableCellEditRowDeleteLoading$:"delete_loading$",tableCellEditRowColumnEditSuffix$:"_edit$",tableCellEditRowColumnEditValueSuffix$:"_editValue$",tableCellEditRowColumnEditLoading$:"_edit_loading$",tableCellEditShowAdd:!1,tableCellEditAddLoading:!1,tableCellEditShowEdit:!1,tableCellEditEditLoading:!1,tableCellEditEditRow:{},tableCellEditEditIndex:-1};t.a={props:{reloadTableCellEdit:Function},data:function(){return Object(d.a)({},r)},computed:{tableCellEditCount:function(){var e=this,t=0;return this.tableCellEditRows.forEach(function(l){e.tableCellEditProps.forEach(function(a){!0===l[""+a+e.tableCellEditRowColumnEditSuffix$]&&t++})}),t}},methods:{formatterTableCellEditRow:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).formatterCell;return e[this.tableCellEditRowDeleteLoading$]=!1,l.forEach(function(l){e[""+l+t.tableCellEditRowColumnEditSuffix$]=!1,e[""+l+t.tableCellEditRowColumnEditValueSuffix$]=e[l],e[""+l+t.tableCellEditRowColumnEditLoading$]=!1,a&&a(e,l)}),e},formatterTableCellEditRows:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.formatterRow,o=a.formatterCell;return e.forEach(function(e){i&&i(e),t.formatterTableCellEditRow(e,l,{formatterCell:o})}),e},reloadTableCellEditRows:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=t.formatterRow,a=t.formatterCell;Object(s.f)(this.reloadTableCellEdit)&&(this.tableCellEditLoading=!0,new n.a(this.reloadTableCellEdit).then(function(t){e.tableCellEditLoading=!1,e.tableCellEditSkeleton=!1,e.tableCellEditRows=e.formatterTableCellEditRows(t,e.tableCellEditProps,{formatterRow:l,formatterCell:a})}).catch(function(t){e.tableCellEditLoading=!1,e.tableCellEditSkeleton=500}))},appendTableCellEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,l=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).formatterCell;this.tableCellEditRows.push(this.formatterTableCellEditRow(e,t,{formatterCell:l}))},appendTableCellEditRows:function(e){var t,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.formatterRow,n=a.formatterCell;(t=this.tableCellEditRows).push.apply(t,i()(this.formatterTableCellEditRows(e,l,{formatterRow:o,formatterCell:n})))},removeTableCellEditRow:function(e){if(e)for(var t=0;t<this.tableCellEditRows.length;t++)if(e===this.tableCellEditRows[t])return void this.tableCellEditRows.splice(t,1)},removeTableCellEditRows:function(e){if(e&&0!==e.length)for(var t=0;t<this.tableCellEditRows.length;t++)for(var l in e)if(e[l]===this.tableCellEditRows[t]){this.tableCellEditRows.splice(t,1),t--;break}},handleCloseLoadingTableCellEditRowColumn:function(e,t){e[""+t+this.tableCellEditRowColumnEditLoading$]=!1},handleCloseLoadingTableCellEditRowColumns:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleCloseLoadingTableCellEditRowColumn(e,l)})},handleCloseEditAndLoadingTableCellEditRowColumn:function(e,t){e[""+t+this.tableCellEditRowColumnEditSuffix$]=!1,e[""+t+this.tableCellEditRowColumnEditLoading$]=!1},handleCloseEditAndLoadingTableCellEditRowColumns:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleCloseEditAndLoadingTableCellEditRowColumn(e,l)})},handleCloseAllEditAndLoadingTableCellEditRowColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableCellEditProps;this.tableCellEditRows.forEach(function(l){return e.handleCloseEditAndLoadingTableCellEditRowColumns(l,t)})},handleConfirmCloseAllTableCellEdit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tableCellEditProps;return new n.a(function(l,a){0!==e.tableCellEditCount?e.$confirm({content:"是否取消编辑中的单元格?",onClickConfirmButton:function(a,i){e.handleCloseAllEditAndLoadingTableCellEditRowColumns(t),i.close(),l()}}):l()})},handleOpenTableCellEditRowColumnEdit:function(e,t){-1!==this.tableCellEditProps.indexOf(t)&&(e[""+t+this.tableCellEditRowColumnEditSuffix$]=!0)},handleOpenTableCellEditRowColumnsEdit:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleOpenTableCellEditRowColumnEdit(e,l)})},handleOpenTableCellEditRowColumnLoading:function(e,t){e[""+t+this.tableCellEditRowColumnEditLoading$]=!0},handleOpenTableCellEditRowColumnsLoading:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.handleOpenTableCellEditRowColumnLoading(e,l)})},isTableCellEditRowColumnChange:function(e,t){return e[""+t+this.tableCellEditRowColumnEditValueSuffix$]!==e[t]},isTableCellEditRowChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t)if(this.isTableCellEditRowColumnChange(e,t[l]))return!0;return!1},getTableCellEditChangeRowColumnNewValues:function(e){var t=this,l={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(a){t.isTableCellEditRowColumnChange(e,a)&&(l[a]=e[""+a+t.tableCellEditRowColumnEditValueSuffix$])}),l},restoreTableCellEditChangeRowColumnValue:function(e,t){this.isTableCellEditRowColumnChange(e,t)&&(e[""+t+this.tableCellEditRowColumnEditValueSuffix$]=e[t])},restoreTableCellEditChangeRowColumnsValue:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.restoreTableCellEditChangeRowColumnValue(e,l)})},restoreTableCellEditChangeRowColumnValueAndCloseEdit:function(e,t){this.isTableCellEditRowColumnChange(e,t)&&(e[""+t+this.tableCellEditRowColumnEditValueSuffix$]=e[t]),e[""+t+this.tableCellEditRowColumnEditSuffix$]=!1},restoreTableCellEditChangeRowColumnsValueAndCloseEdit:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.restoreTableCellEditChangeRowColumnValueAndCloseEdit(e,l)})},syncTableCellEditRowColumnEditValue:function(e,t){this.isTableCellEditRowColumnChange(e,t)&&(e[t]=e[""+t+this.tableCellEditRowColumnEditValueSuffix$])},syncTableCellEditRowColumnsEditValue:function(e){var t=this;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps).forEach(function(l){return t.syncTableCellEditRowColumnEditValue(e,l)})},handleBlurTableCellEditColumnChange:function(e){this.tableCellEditBlurSaveEdit&&(this.isTableCellEditRowColumnChange(e.row,e.column.property)?this.handleSaveTableCellEdit(e):this.restoreTableCellEditChangeRowColumnValueAndCloseEdit(e.row,e.column.property))},isEnableTableCellEditConfirmEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t){if(e.row[""+t[l]+this.tableCellEditRowColumnEditLoading$])return!1;if(!e.row[""+t[l]+this.tableCellEditRowColumnEditSuffix$])return!0}return!1},isEnableTableCellEditCancelEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t){if(e.row[""+t[l]+this.tableCellEditRowColumnEditLoading$])return!1;if(e.row[""+t[l]+this.tableCellEditRowColumnEditSuffix$])return!0}return!1},isEnableTableCellEditSaveEditRow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps;for(var l in t){if(e.row[""+t[l]+this.tableCellEditRowColumnEditLoading$])return!1;if(e.row[""+t[l]+this.tableCellEditRowColumnEditSuffix$]&&this.isTableCellEditRowColumnChange(e.row,t[l]))return!0}return!1}}}},BLcK:function(e,t,l){"use strict";var a=l("Nj3f"),i={get:{validateValueCanUse:a.a+"/api-gar-sub-module/get/validateValueCanUse/{value}",subModuleBySubModuleId:a.a+"/api-gar-sub-module/get/subModuleBySubModuleId/{subModuleId}",listSubModule:a.a+"/api-gar-sub-module/get/list/subModule",pageListSubModule:a.a+"/api-gar-sub-module/get/pageList/subModule",listSubModuleAndSubModuleRouteCount:a.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleRouteCount",listSubModuleAndSubModuleMenuGroupCount:a.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleMenuGroupCount"},post:{subModule:a.a+"/api-gar-sub-module/post/subModule"},put:{subModuleBySubModuleId:a.a+"/api-gar-sub-module/put/subModuleBySubModuleId/{subModuleId}",switchSubModuleIndexBySubModuleId:a.a+"/api-gar-sub-module/put/switchSubModuleIndexBySubModuleId/{sourceSubModuleId}/{targetSubModuleId}"},delete:{subModuleBySubModuleId:a.a+"/api-gar-sub-module/delete/subModuleBySubModuleId/{subModuleId}",listSubModuleBySubModuleIds:a.a+"/api-gar-sub-module/delete/list/subModuleBySubModuleIds/{subModuleIds}"}};t.a=i},EOLF:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("p00s"),i=l.n(a),o=l("qSEq"),n=l("elhn"),d=l("3fIP"),s=l("w99x"),r=l("Qu/Q"),u=l("BBDL"),c=l("AGSt"),m=l("ELdc"),p={name:"template-cell-edit-table",components:{ViewTypeSelect:r.default,TemplateEdit:s.default,TemplateAdd:d.default,ErrorPage:n.a},mixins:[o.b,u.a],props:{moduleId:{type:String,required:!0}},data:function(){return{tableCellEditProps:["name","value","type","description"],tableCellEditSize:"medium",tableCellEditBlurSaveEdit:!1,tableCellEditChangeSaveEdit:!0,orderLoading:!1}},methods:{showAdd:function(){var e=this;this.handleConfirmCloseAllTableCellEdit().then(function(){return e.tableCellEditShowAdd=!0})},showEdit:function(e){var t=this,l=e.row,a=e.$index;this.handleConfirmCloseAllTableCellEdit().then(function(){t.tableCellEditEditRow=l,t.tableCellEditEditIndex=a,t.tableCellEditShowEdit=!0})},appendRows:function(e){this.appendTableCellEditRows(e,this.tableCellEditProps)},handleSaveTableCellEdit:function(e){var t=this,l=e.row,a=e.column,o=(e.$index,this.getTableCellEditChangeRowColumnNewValues(l,[a.property])),n=i()(o);this.handleCloseEditAndLoadingTableCellEditRowColumn(l,a.property),0!==n.length&&(this.handleOpenTableCellEditRowColumnsLoading(l,n),this.$Ajax.put(c.a.put.templateByTemplateId,Object(m.a)({moduleId:this.moduleId,subModuleId:l.subModuleId,templateId:l.id},o)).success(!0,function(){t.syncTableCellEditRowColumnEditValue(l,a.property)}).finally(function(){return t.handleCloseLoadingTableCellEditRowColumn(l,a.property)}))},handleSaveTableRowEdit:function(e){var t=this,l=e.row,a=(e.column,e.$index,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tableCellEditProps),o=this.getTableCellEditChangeRowColumnNewValues(l,a),n=i()(o);this.handleCloseEditAndLoadingTableCellEditRowColumns(l,a),0!==n.length&&(this.handleOpenTableCellEditRowColumnsLoading(l,n),this.$Ajax.put(c.a.put.templateByTemplateId,Object(m.a)({moduleId:this.moduleId,subModuleId:l.subModuleId,templateId:l.id},o)).success(!0,function(){t.syncTableCellEditRowColumnsEditValue(l,n)}).finally(function(){return t.handleCloseLoadingTableCellEditRowColumns(l,a)}))},handleChangeStatus:function(e){var t=this,l=e.row;e.column,e.$index;this.$Ajax.put(c.a.put.templateByTemplateId,{moduleId:this.moduleId,templateId:l.id,status:l.status}).success(!0).notSuccess(function(){return l.status=l.status===t.dict.statusValue.NORMAL?t.dict.statusValue.DISABLED:t.dict.statusValue.NORMAL})},handleDeleteRow:function(e,t,l){var a=this,i=l.row,o=(l.column,l.$index);i[this.tableCellEditRowDeleteLoading$]=!0,this.$Ajax.delete(c.a.delete.templateByTemplateId,{moduleId:this.moduleId,templateId:i.id}).before(function(){return i[a.tableCellEditRowDeleteLoading$]=!1}).success("删除成功",function(){a.tableCellEditRows.splice(o,1),t.close()})},handleSwitchOrder:function(e){var t=this,l=e.source,a=e.sourceIndex,i=e.target,o=e.targetIndex;this.orderLoading=!0,this.$Ajax.put(c.a.put.switchTemplateIndexByTemplateId,{moduleId:this.moduleId,sourceTemplateId:l.id,targetTemplateId:i.id}).success(!0,function(){t.$set(t.tableCellEditRows,a,i),t.$set(t.tableCellEditRows,o,l)}).finally(function(){return t.orderLoading=!1})},handleSubmitEditRowSuccess:function(e,t){Object(m.a)(this.tableCellEditRows[this.tableCellEditEditIndex],e),this.tableCellEditShowEdit=!1},handleSelectionChange:function(e){this.$emit("table-selection-change",e,this)}}},b={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("we-skeleton",{attrs:{animation:"","paragraph-rows":10,"title-width":"50%","paragraph-width":"100%"},on:{reload:e.reloadTableCellEditRows},model:{value:e.tableCellEditSkeleton,callback:function(t){e.tableCellEditSkeleton=t},expression:"tableCellEditSkeleton"}},[l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableCellEditLoading&&!1===e.tableCellEditSkeleton,expression:"tableCellEditLoading && tableCellEditSkeleton === false"}],staticClass:"gar-list-main-inner",staticStyle:{bottom:"62px"}},[l("el-table",{ref:e.tableCellEditRef,attrs:{data:e.tableCellEditRows,size:e.tableCellEditSize,"row-key":function(e){return e.id},width:"100%",height:"100%"},on:{"cell-dblclick":function(t,l,a,i){return e.handleOpenTableCellEditRowColumnEdit(t,l.property)},"selection-change":e.handleSelectionChange}},[l("template",{slot:"empty"},[l("error-page",{attrs:{"image-width":180,"image-height":180}})],1),e._v(" "),e._t("table-column-before"),e._v(" "),l("el-table-column",{attrs:{prop:"subModuleName",label:"所属子模块名称",align:"center","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{prop:"name",label:"模板名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n        value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n        size: 'mini'\n      }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("we-tooltip",{attrs:{disabled:e.tableCellEditBlurSaveEdit,placement:"top-start",effect:"light"}},[l("template",{slot:"content"},[l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],type:"text",size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValueAndCloseEdit(t.row,t.column.property)}}},[e._v("关闭")]),e._v(" "),l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]||!e.isTableCellEditRowColumnChange(t.row,t.column.property),size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValue(t.row,t.column.property)}}},[e._v("还原")]),e._v(" "),l("we-button",{attrs:{loading:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],disabled:!e.isTableCellEditRowColumnChange(t.row,t.column.property),type:"primary",size:"mini"},on:{click:function(l){e.handleSaveTableCellEdit(t)}}},[e._v("保存")])],1),e._v(" "),l("el-input",{attrs:{placeholder:"请输入"+t.column.label,size:e.tableCellEditSize},on:{blur:function(l){e.handleBlurTableCellEditColumnChange(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})],2)]:[e._v(e._s(t.row[t.column.property]))]],2)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"value",label:"模板唯一标识符",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n        value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n        size: 'mini'\n      }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("we-tooltip",{attrs:{disabled:e.tableCellEditBlurSaveEdit,placement:"top-start",effect:"light"}},[l("template",{slot:"content"},[l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],type:"text",size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValueAndCloseEdit(t.row,t.column.property)}}},[e._v("关闭")]),e._v(" "),l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]||!e.isTableCellEditRowColumnChange(t.row,t.column.property),size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValue(t.row,t.column.property)}}},[e._v("还原")]),e._v(" "),l("we-button",{attrs:{loading:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],disabled:!e.isTableCellEditRowColumnChange(t.row,t.column.property),type:"primary",size:"mini"},on:{click:function(l){e.handleSaveTableCellEdit(t)}}},[e._v("保存")])],1),e._v(" "),l("el-input",{attrs:{placeholder:"请输入"+t.column.label,size:e.tableCellEditSize},on:{blur:function(l){e.handleBlurTableCellEditColumnChange(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})],2)]:[e._v(e._s(t.row[t.column.property]))]],2)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"type",label:"模板类型",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n        value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n        size: 'mini'\n      }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("view-type-select",{attrs:{size:e.tableCellEditSize},on:{change:function(){!0===e.tableCellEditChangeSaveEdit&&e.handleSaveTableCellEdit(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})]:[e._v(e._s(e.dict.templateTypeLabel[t.row[t.column.property]]))]],2)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"description",label:"模板描述",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{directives:[{name:"loading",rawName:"v-loading",value:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],size:"mini"},expression:"{\n        value: scope.row[`${scope.column.property}${tableCellEditRowColumnEditLoading$}`],\n        size: 'mini'\n      }"}]},[!t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]&&t.row[""+t.column.property+e.tableCellEditRowColumnEditSuffix$]?[l("we-tooltip",{attrs:{disabled:e.tableCellEditBlurSaveEdit,placement:"top-start",effect:"light"}},[l("template",{slot:"content"},[l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],type:"text",size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValueAndCloseEdit(t.row,t.column.property)}}},[e._v("关闭")]),e._v(" "),l("we-button",{attrs:{disabled:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$]||!e.isTableCellEditRowColumnChange(t.row,t.column.property),size:"mini"},on:{click:function(l){e.restoreTableCellEditChangeRowColumnValue(t.row,t.column.property)}}},[e._v("还原")]),e._v(" "),l("we-button",{attrs:{loading:t.row[""+t.column.property+e.tableCellEditRowColumnEditLoading$],disabled:!e.isTableCellEditRowColumnChange(t.row,t.column.property),type:"primary",size:"mini"},on:{click:function(l){e.handleSaveTableCellEdit(t)}}},[e._v("保存")])],1),e._v(" "),l("el-input",{attrs:{placeholder:"请输入"+t.column.label,size:e.tableCellEditSize},on:{blur:function(l){e.handleBlurTableCellEditColumnChange(t)}},model:{value:t.row[""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$],callback:function(l){e.$set(t.row,""+t.column.property+e.tableCellEditRowColumnEditValueSuffix$,l)},expression:"scope.row[`${scope.column.property}${tableCellEditRowColumnEditValueSuffix$}`]"}})],2)]:[e._v(e._s(t.row[t.column.property]))]],2)]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"status",label:"状态",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.type===e.dict.resourceTypeValue.NODE?[e._v("-")]:l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},on:{change:function(l){e.handleChangeStatus(t)}},model:{value:t.row.status,callback:function(l){e.$set(t.row,"status",l)},expression:"scope.row.status"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"status",label:"操作",align:"center",width:"369","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",{staticClass:"common-tal"},[l("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEnableTableCellEditConfirmEditRow(t,e.tableCellEditProps)},on:{click:function(l){e.handleOpenTableCellEditRowColumnsEdit(t.row,e.tableCellEditProps)}}},[e._v("\n              编辑此行\n            ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEnableTableCellEditCancelEditRow(t,e.tableCellEditProps)},on:{click:function(l){e.handleCloseEditAndLoadingTableCellEditRowColumns(t.row,e.tableCellEditProps)}}},[e._v("\n              取消编辑此行\n            ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEnableTableCellEditSaveEditRow(t,e.tableCellEditProps)},on:{click:function(l){e.handleSaveTableRowEdit(t,e.tableCellEditProps)}}},[e._v("\n              保存此行\n            ")]),e._v(" "),l("we-button",{attrs:{type:"text",size:"small"},on:{click:function(l){e.showEdit(t)}}},[e._v("\n              编辑\n            ")]),e._v(" "),l("we-popover",{attrs:{title:"操作",type:"confirm",placement:"top-start",manual:t.row[e.tableCellEditRowDeleteLoading$],"confirm-button-text":"删了吧","cancel-button-text":t.row[e.tableCellEditRowDeleteLoading$]?"你没有想的机会了":"我再想想","cancel-button-options":{disabled:t.row[e.tableCellEditRowDeleteLoading$]},"confirm-button-options":{loading:t.row[e.tableCellEditRowDeleteLoading$]}},on:{"click-cancel-button":function(e,t){return t.close()},"click-confirm-button":function(l,a){return e.handleDeleteRow(l,a,t)}}},[l("template",{slot:"content"},[t.row[e.tableCellEditRowDeleteLoading$]?[l("span",{staticStyle:{color:"red"}},[e._v("删除中...")]),e._v("删除完成后将自动关闭气泡\n                ")]:[e._v("\n                  您确定要"),l("span",{staticStyle:{color:"red"}},[e._v("删除")]),e._v("该模板"),l("span",{staticStyle:{color:"red"}},[e._v("及相关数据")]),e._v("吗？\n                  "),l("div",{staticStyle:{color:"red"}},[e._v("删除后不可恢复！！！")])]],2),e._v(" "),l("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])],2),e._v(" "),l("span",{staticStyle:{"padding-left":"8px"}},[t.$index>0?l("we-button",{attrs:{loading:e.orderLoading,shape:"circle",size:"mini","icon-name":"arrow-up"},on:{click:function(l){e.handleSwitchOrder({source:t.row,sourceIndex:t.$index,target:e.tableCellEditRows[t.$index-1],targetIndex:t.$index-1})}}}):e._e(),e._v(" "),t.$index<e.tableCellEditRows.length-1?l("we-button",{attrs:{loading:e.orderLoading,shape:"circle",size:"mini","icon-name":"arrow-down"},on:{click:function(l){e.handleSwitchOrder({source:t.row,sourceIndex:t.$index,target:e.tableCellEditRows[t.$index+1],targetIndex:t.$index+1})}}}):e._e()],1)],1)]}}])})],2),e._v(" "),l("we-layer",{attrs:{title:"新增模板",width:50,height:65,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.tableCellEditShowAdd,callback:function(t){e.tableCellEditShowAdd=t},expression:"tableCellEditShowAdd"}},[l("template-add",{attrs:{"module-id":e.moduleId},on:{"submit-success":function(t,l){return e.$emit("table-cell-edit-add-success",{row:t,vm:l})}}},[l("template",{slot:"button"},[l("el-button",{on:{click:function(t){e.tableCellEditShowAdd=!1}}},[e._v("关闭")])],1)],2)],1),e._v(" "),l("we-layer",{attrs:{title:"编辑模板",width:50,height:65,"min-width":500,"show-footer":!1,drag:"",resize:""},model:{value:e.tableCellEditShowEdit,callback:function(t){e.tableCellEditShowEdit=t},expression:"tableCellEditShowEdit"}},[l("template-edit",{attrs:{"module-id":e.moduleId,data:e.tableCellEditEditRow},on:{"submit-success":e.handleSubmitEditRowSuccess}},[l("template",{slot:"button"},[l("el-button",{on:{click:function(t){e.tableCellEditShowEdit=!1}}},[e._v("关闭")])],1)],2)],1)],1)])},staticRenderFns:[]},f=l("C7Lr")(p,b,!1,null,null,null);t.default=f.exports},Kgiw:function(e,t,l){e.exports=l.p+"gar/img/no_page_img.cccfdce.png"},OSgO:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("lpYf"),i=l("BLcK"),o=l("ELdc"),n={name:"sub-module-select",mixins:[a.a],props:{moduleId:{type:String,required:!0}},methods:{getSelectRows:function(){var e=this;this.$Ajax.get(i.a.get.listSubModule,Object(o.a)({moduleId:this.moduleId})).success(!0,function(t){e.selectRows=t.rows,e.initSelectedFirst&&e.selectRows.length>0&&(e.selectValue=e.selectRows[0].id)})}},created:function(){this.getSelectRows()}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",{staticClass:"common-w-large",attrs:{size:"small"},on:{change:e.handleChangeSelectValue},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e.showAllOption?l("el-option",{attrs:{label:e.allOptionLabel,value:e.allOptionValue}}):e._e(),e._v(" "),e._l(e.selectRows,function(e,t){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)},staticRenderFns:[]},s=l("C7Lr")(n,d,!1,null,null,null);t.default=s.exports},"Qu/Q":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("qSEq"),i=l("lpYf"),o={name:"view-type-select",mixins:[a.b,i.a],props:{size:{type:String,default:"small"}},created:function(){this.selectRows=this.dict.templateTypes,this.initSelectedFirst&&this.selectRows.length>0&&(this.selectValue=this.selectRows[0].value)}},n={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",{attrs:{placeholder:"请选择视图类型",size:e.size},on:{change:e.handleChangeSelectValue},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e.showAllOption?l("el-option",{attrs:{label:e.allOptionLabel,value:e.allOptionValue}}):e._e(),e._v(" "),e._l(e.selectRows,function(e,t){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)},staticRenderFns:[]},d=l("C7Lr")(o,n,!1,null,null,null);t.default=d.exports},XAdh:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:{value:Array},data:function(){return{multipleSelectValues:this.value||[],multipleSelectRows:[]}},watch:{value:function(e){this.multipleSelectValues=e},multipleSelectValues:function(e){this.$emit("input",e)}},methods:{handleChangeSelectValue:function(e){this.$emit("change",e,this)}}},i=l("BLcK"),o=l("ELdc"),n={name:"sub-module-multiple-select",mixins:[a],props:{moduleId:{type:String,required:!0}},methods:{getSelectRows:function(){var e=this;this.$Ajax.get(i.a.get.listSubModule,Object(o.a)({moduleId:this.moduleId})).success(!0,function(t){e.multipleSelectRows=t.rows})}},created:function(){this.getSelectRows()}},d={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",{staticClass:"common-w-large",attrs:{size:"small",multiple:""},on:{change:e.handleChangeSelectValue},model:{value:e.multipleSelectValues,callback:function(t){e.multipleSelectValues=t},expression:"multipleSelectValues"}},e._l(e.multipleSelectRows,function(e,t){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)},staticRenderFns:[]},s=l("C7Lr")(n,d,!1,null,null,null);t.default=s.exports},alcQ:function(e,t,l){"use strict";t.a={data:function(){return{formRefValue$:"form",formLoading:!1}},methods:{resetForm:function(){this.$refs[this.formRefValue$].resetFields()}}}},elhn:function(e,t,l){"use strict";var a={name:"error-page",componentName:"ErrorPage",optionName:"errorPage",props:{type:{type:[String,Number],default:"noData"},title:String,imageWidth:{type:Number,default:200},imageHeight:{type:Number,default:200}},computed:{__title__:function(){return this.title?this.title:403===this.type||"403"===this.type?"抱歉您无权查看此页面。":404===this.type||"404"===this.type?"抱歉，您访问的页面不存在。":500===this.type||"500"===this.type?"抱歉，您的网络有问题加载失败。":"抱歉暂无信息。"}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-no-data"},[e._t("default",[403===e.type||"403"===e.type?a("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("+hZp")}}):404===e.type||"404"===e.type?a("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("29J1")}}):500===e.type||"500"===e.type?a("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("Kgiw")}}):a("img",{staticClass:"global-no-data-picture",style:{height:e.imageHeight+"px",width:e.imageWidth+"px"},attrs:{src:l("29J1")}})]),e._v(" "),a("div",{staticClass:"global-no-data-text",class:{"is-margin-top":0!==e.imageWidth&&0!==e.imageHeight}},[e._t("title",[a("span",[e._v(e._s(e.__title__))])])],2),e._v(" "),a("div",{staticClass:"global-no-data-button"},[e._t("footer")],2)],2)},staticRenderFns:[]},o=l("C7Lr")(a,i,!1,null,null,null);t.a=o.exports},lpYf:function(e,t,l){"use strict";t.a={props:{value:String,initSelectedFirst:Boolean,showAllOption:Boolean,allOptionLabel:{type:String,default:"全部"},allOptionValue:{default:""}},data:function(){return{selectValue:this.value||"",selectRows:[]}},watch:{value:function(e){this.selectValue=e},selectValue:function(e){this.$emit("input",e)}},methods:{handleChangeSelectValue:function(e){this.$emit("change",e,this)}}}},w99x:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("qSEq"),i=l("alcQ"),o=l("OSgO"),n=l("Qu/Q"),d=l("AGSt"),s=l("ELdc"),r={name:"template-edit",components:{ViewTypeSelect:n.default,SubModuleSelect:o.default},mixins:[a.b,i.a],props:{moduleId:{type:String,required:!0},data:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{formData:Object(s.a)({},this.data),formRules:{subModuleId:[{required:!0,message:"请选择所属子模块",trigger:"change"}],name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入模板唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(t,l,a){e.formData.subModuleId?e.$Ajax.get(d.a.get.validateValueCanUseBySubModuleId,[l,e.formData.subModuleId],{params:{moduleId:e.moduleId,excludeValues:e.data.value}}).success(!0,function(e){e.records.canUse?a():a(new Error("模板唯一标识符不可用"))}).fail(!0,function(e){a(new Error(e.resultInfo.message))}).catch(function(){a(new Error("发生错误...请稍后再试"))}):a(new Error("请选择所属子模块"))},trigger:"blur"}],type:[{required:!0,message:"请选择模板类型",trigger:"change"}]}}},watch:{data:function(e){this.resetEditForm()}},methods:{resetEditForm:function(){this.formData=Object(s.a)({},this.data)},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.put(d.a.put.templateByTemplateId,Object(s.a)({moduleId:e.moduleId,templateId:e.formData.id},e.formData)).success("修改模板成功",function(){e.$emit("submit-success",e.formData,e)}).finally(function(){return e.formLoading=!1})})}}},u={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"common-padding-all",staticStyle:{"padding-bottom":"0"}},[l("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"135px",size:"small"}},[l("el-form-item",{attrs:{label:"所属子模块：",prop:"subModuleId"}},[l("sub-module-select",{attrs:{"module-id":e.moduleId},model:{value:e.formData.subModuleId,callback:function(t){e.$set(e.formData,"subModuleId",t)},expression:"formData.subModuleId"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板名称：",prop:"name"}},[l("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板唯一标识符：",prop:"value"}},[l("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板类型：",prop:"type"}},[l("view-type-select",{attrs:{"init-selected-first":""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"模板描述：",prop:"description"}},[l("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"立即使用：",prop:"status"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1),e._v(" "),l("el-form-item",[l("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("提交修改")]),e._v(" "),l("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetEditForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],1)],1)},staticRenderFns:[]},c=l("C7Lr")(r,u,!1,null,null,null);t.default=c.exports}});