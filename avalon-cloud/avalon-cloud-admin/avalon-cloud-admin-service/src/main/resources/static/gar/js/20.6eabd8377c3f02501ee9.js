webpackJsonp([20,28,34],{AGSt:function(e,t,a){"use strict";var l=a("Nj3f"),u={get:{validateValueCanUseBySubModuleId:l.a+"/api-gar-template/get/validateValueCanUseBySubModuleId/{value}/{subModuleId}",templateByTemplateId:l.a+"/api-gar-template/get/templateByTemplateId/{templateId}",listTemplate:l.a+"/api-gar-view/get/list/template",pageListTemplate:l.a+"/api-gar-template/get/pageList/template"},post:{template:l.a+"/api-gar-template/post/template"},put:{templateByTemplateId:l.a+"/api-gar-template/put/templateByTemplateId/{templateId}",switchTemplateIndexByTemplateId:l.a+"/api-gar-template/put/switchTemplateIndexByTemplateId/{sourceTemplateId}/{targetTemplateId}"},delete:{templateByTemplateId:l.a+"/api-gar-template/delete/templateByTemplateId/{templateId}",listTemplateByTemplateIds:l.a+"/api-gar-template/delete/list/templateByTemplateIds/{templateIds}"}};t.a=u},BLcK:function(e,t,a){"use strict";var l=a("Nj3f"),u={get:{validateValueCanUse:l.a+"/api-gar-sub-module/get/validateValueCanUse/{value}",subModuleBySubModuleId:l.a+"/api-gar-sub-module/get/subModuleBySubModuleId/{subModuleId}",listSubModule:l.a+"/api-gar-sub-module/get/list/subModule",pageListSubModule:l.a+"/api-gar-sub-module/get/pageList/subModule",listSubModuleAndSubModuleRouteCount:l.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleRouteCount",listSubModuleAndSubModuleMenuGroupCount:l.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleMenuGroupCount"},post:{subModule:l.a+"/api-gar-sub-module/post/subModule"},put:{subModuleBySubModuleId:l.a+"/api-gar-sub-module/put/subModuleBySubModuleId/{subModuleId}",switchSubModuleIndexBySubModuleId:l.a+"/api-gar-sub-module/put/switchSubModuleIndexBySubModuleId/{sourceSubModuleId}/{targetSubModuleId}"},delete:{subModuleBySubModuleId:l.a+"/api-gar-sub-module/delete/subModuleBySubModuleId/{subModuleId}",listSubModuleBySubModuleIds:l.a+"/api-gar-sub-module/delete/list/subModuleBySubModuleIds/{subModuleIds}"}};t.a=u},OSgO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("lpYf"),u=a("BLcK"),s=a("ELdc"),o={name:"sub-module-select",mixins:[l.a],props:{moduleId:{type:String,required:!0}},methods:{getSelectRows:function(){var e=this;this.$Ajax.get(u.a.get.listSubModule,Object(s.a)({moduleId:this.moduleId})).success(!0,function(t){e.selectRows=t.rows,e.initSelectedFirst&&e.selectRows.length>0&&(e.selectValue=e.selectRows[0].id)})}},created:function(){this.getSelectRows()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticClass:"common-w-large",attrs:{size:"small"},on:{change:e.handleChangeSelectValue},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e.showAllOption?a("el-option",{attrs:{label:e.allOptionLabel,value:e.allOptionValue}}):e._e(),e._v(" "),e._l(e.selectRows,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)},staticRenderFns:[]},r=a("C7Lr")(o,i,!1,null,null,null);t.default=r.exports},"Qu/Q":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("qSEq"),u=a("lpYf"),s={name:"view-type-select",mixins:[l.b,u.a],props:{size:{type:String,default:"small"}},created:function(){this.selectRows=this.dict.templateTypes,this.initSelectedFirst&&this.selectRows.length>0&&(this.selectValue=this.selectRows[0].value)}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"请选择视图类型",size:e.size},on:{change:e.handleChangeSelectValue},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e.showAllOption?a("el-option",{attrs:{label:e.allOptionLabel,value:e.allOptionValue}}):e._e(),e._v(" "),e._l(e.selectRows,function(e,t){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)},staticRenderFns:[]},i=a("C7Lr")(s,o,!1,null,null,null);t.default=i.exports},alcQ:function(e,t,a){"use strict";t.a={data:function(){return{formRefValue$:"form",formLoading:!1}},methods:{resetForm:function(){this.$refs[this.formRefValue$].resetFields()}}}},lpYf:function(e,t,a){"use strict";t.a={props:{value:String,initSelectedFirst:Boolean,showAllOption:Boolean,allOptionLabel:{type:String,default:"全部"},allOptionValue:{default:""}},data:function(){return{selectValue:this.value||"",selectRows:[]}},watch:{value:function(e){this.selectValue=e},selectValue:function(e){this.$emit("input",e)}},methods:{handleChangeSelectValue:function(e){this.$emit("change",e,this)}}}},w99x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("qSEq"),u=a("alcQ"),s=a("OSgO"),o=a("Qu/Q"),i=a("AGSt"),r=a("ELdc"),d={name:"template-edit",components:{ViewTypeSelect:o.default,SubModuleSelect:s.default},mixins:[l.b,u.a],props:{moduleId:{type:String,required:!0},data:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{formData:Object(r.a)({},this.data),formRules:{subModuleId:[{required:!0,message:"请选择所属子模块",trigger:"change"}],name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],value:[{required:!0,message:"请输入模板唯一标识符",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"},{validator:function(t,a,l){e.formData.subModuleId?e.$Ajax.get(i.a.get.validateValueCanUseBySubModuleId,[a,e.formData.subModuleId],{params:{moduleId:e.moduleId,excludeValues:e.data.value}}).success(!0,function(e){e.records.canUse?l():l(new Error("模板唯一标识符不可用"))}).fail(!0,function(e){l(new Error(e.resultInfo.message))}).catch(function(){l(new Error("发生错误...请稍后再试"))}):l(new Error("请选择所属子模块"))},trigger:"blur"}],type:[{required:!0,message:"请选择模板类型",trigger:"change"}]}}},watch:{data:function(e){this.resetEditForm()}},methods:{resetEditForm:function(){this.formData=Object(r.a)({},this.data)},submit:function(){var e=this;this.$refs[this.formRefValue$].validate(function(t){if(!t)return!1;e.formLoading=!0,e.$Ajax.put(i.a.put.templateByTemplateId,Object(r.a)({moduleId:e.moduleId,templateId:e.formData.id},e.formData)).success("修改模板成功",function(){e.$emit("submit-success",e.formData,e)}).finally(function(){return e.formLoading=!1})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-padding-all",staticStyle:{"padding-bottom":"0"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:e.formRefValue$,attrs:{rules:e.formRules,model:e.formData,"label-width":"135px",size:"small"}},[a("el-form-item",{attrs:{label:"所属子模块：",prop:"subModuleId"}},[a("sub-module-select",{attrs:{"module-id":e.moduleId},model:{value:e.formData.subModuleId,callback:function(t){e.$set(e.formData,"subModuleId",t)},expression:"formData.subModuleId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板名称：",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板唯一标识符：",prop:"value"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板类型：",prop:"type"}},[a("view-type-select",{attrs:{"init-selected-first":""},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模板描述：",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"立即使用：",prop:"status"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":e.dict.statusValue.NORMAL,"inactive-value":e.dict.statusValue.DISABLED},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{loading:e.formLoading,type:"primary"},on:{click:e.submit}},[e._v("提交修改")]),e._v(" "),a("el-button",{attrs:{disabled:e.formLoading},on:{click:e.resetEditForm}},[e._v("重置")]),e._v(" "),e._t("button")],2)],1)],1)},staticRenderFns:[]},c=a("C7Lr")(d,n,!1,null,null,null);t.default=c.exports}});