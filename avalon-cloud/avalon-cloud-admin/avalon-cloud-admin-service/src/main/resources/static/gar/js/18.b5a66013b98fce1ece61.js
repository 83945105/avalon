webpackJsonp([18],{"+hZp":function(t,e,i){t.exports=i.p+"gar/img/no_authority_img.85ebcdd.png"},"29J1":function(t,e,i){t.exports=i.p+"gar/img/no_data_img.869b577.png"},BLcK:function(t,e,i){"use strict";var s=i("Nj3f"),l={get:{validateValueCanUse:s.a+"/api-gar-sub-module/get/validateValueCanUse/{value}",subModuleBySubModuleId:s.a+"/api-gar-sub-module/get/subModuleBySubModuleId/{subModuleId}",listSubModule:s.a+"/api-gar-sub-module/get/list/subModule",pageListSubModule:s.a+"/api-gar-sub-module/get/pageList/subModule",listSubModuleAndSubModuleRouteCount:s.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleRouteCount",listSubModuleAndSubModuleMenuGroupCount:s.a+"/api-gar-sub-module/get/list/subModuleAndSubModuleMenuGroupCount"},post:{subModule:s.a+"/api-gar-sub-module/post/subModule"},put:{subModuleBySubModuleId:s.a+"/api-gar-sub-module/put/subModuleBySubModuleId/{subModuleId}",switchSubModuleIndexBySubModuleId:s.a+"/api-gar-sub-module/put/switchSubModuleIndexBySubModuleId/{sourceSubModuleId}/{targetSubModuleId}"},delete:{subModuleBySubModuleId:s.a+"/api-gar-sub-module/delete/subModuleBySubModuleId/{subModuleId}",listSubModuleBySubModuleIds:s.a+"/api-gar-sub-module/delete/list/subModuleBySubModuleIds/{subModuleIds}"}};e.a=l},Kgiw:function(t,e,i){t.exports=i.p+"gar/img/no_page_img.cccfdce.png"},LlFv:function(t,e,i){"use strict";var s=i("IHPB"),l=i.n(s),a=i("rVsN"),o=i.n(a),n=i("ELdc"),d=i("C6mD");e.a={props:{reloadList:Function},data:function(){return{listSelectedRow:{},listSelectedRowIndex:-1,listSkeleton:!0,listLoading:!1,listRows:[],listRowDeleteLoading$:"delete_loading$",listShowAdd:!1,listAddLoading:!1,listShowEdit:!1,listEditLoading:!1}},methods:{formatterListRow:function(t){return t[this.listRowDeleteLoading$]=!1,t},formatterListRows:function(t){var e=this,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).formatterRow;return t.forEach(function(t){e.formatterListRow(t),i&&i(t)}),t},reloadListRows:function(t){var e=this,i=t.formatterRow;Object(d.f)(this.reloadList)&&(this.listLoading=!0,new o.a(this.reloadList).then(function(t){e.listLoading=!1,e.listSkeleton=!1,e.listRows=e.formatterListRows(t,{formatterRow:i})}).catch(function(t){e.listLoading=!1,e.listSkeleton=500}))},appendListRow:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).formatterCell;this.listRows.push(this.formatterListRow(t,{formatterCell:e}))},appendListRows:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.formatterRow,a=i.formatterCell;(e=this.listRows).push.apply(e,l()(this.formatterListRows(t,{formatterRow:s,formatterCell:a})))},removeListRow:function(t){if(t)for(var e=0;e<this.listRows.length;e++)if(t===this.listRows[e])return void this.listRows.splice(e,1)},removeListRows:function(t){if(t&&0!==t.length)for(var e=0;e<this.listRows.length;e++)for(var i in t)if(t[i]===this.listRows[e]){this.listRows.splice(e,1),e--;break}},handleListShowEdit:function(t){var e=t.row,i=t.$index;this.listSelectedRow=e,this.listSelectedRowIndex=i,Object(n.a)(this.listEditForm,e),this.listShowEdit=!0}}}},MEzm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("aA9S"),l=i.n(s),a=i("qSEq"),o=i("pnBm"),n=i("LlFv"),d=i("ELdc"),r=i("elhn"),u=i("BLcK"),c=a.b.data(),m={likeText:""},g={name:"",value:"",description:"",status:""},p={name:"sub-module-manage",mixins:[a.b,o.a,n.a],components:{ErrorPage:r.a},props:{moduleId:{type:String,required:!0}},data:function(){var t=this;return{params:l()({},m),orderLoading:!1,listAddForm:Object(d.a)({},g,{status:c.dict.statusValue.NORMAL}),listAddFormRules:{name:[{required:!0,message:"请输入子模块名称",trigger:"blur"}],value:[{required:!0,message:"请输入子模块唯一标识符",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"},{validator:function(e,i,s){t.$Ajax.get(u.a.get.validateValueCanUse,[i],{params:{moduleId:t.moduleId}}).success(!0,function(t){t.records.canUse?s():s(new Error("唯一标识符不可用"))}).fail(!0,function(t){s(new Error(t.resultInfo.message))}).catch(function(){s(new Error("发生错误...请稍后再试"))})},trigger:"blur"}]},listEditForm:Object(d.a)({},g),listEditFormRules:{name:[{required:!0,message:"请输入子模块名称",trigger:"blur"}],value:[{required:!0,message:"请输入子模块唯一标识符",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"},{validator:function(e,i,s){t.$Ajax.get(u.a.get.validateValueCanUse,[i],{params:{moduleId:t.moduleId,excludeValues:[t.listEditForm.value].toString()}}).success(!0,function(t){t.records.canUse?s():s(new Error("唯一标识符不可用"))}).fail(!0,function(t){s(new Error(t.resultInfo.message))}).catch(function(){s(new Error("发生错误...请稍后再试"))})},trigger:"blur"}]}}},methods:{resetForm:function(t){this.$refs[t].resetFields()},getRows:function(){var t=this;this.listLoading=!0,this.$Ajax.get(u.a.get.listSubModule,Object(d.a)({moduleId:this.moduleId},this.params)).success(!0,function(e){t.listRows=t.formatterListRows(e.rows),t.listSkeleton=!1}).notSuccess(function(){return t.listSkeleton=500}).catch(function(){return t.listSkeleton=500}).finally(function(){return t.listLoading=!1})},handleChangeStatus:function(t){var e=t.row;t.$index;this.$Ajax.post(u.a.put.subModuleBySubModuleId,{moduleId:this.moduleId,subModuleId:e.id,status:e.status}).success(!0).notSuccess(function(){return e.status="ENABLED"===e.status?"DISABLED":"ENABLED"})},handleClickListAdd:function(t,e){var i=this;this.$refs.listAddForm.validate(function(t){if(!t)return!1;i.listAddLoading=!0,i.$Ajax.post(u.a.post.subModule,Object(d.a)({moduleId:i.moduleId},i.listAddForm)).success("创建子模块成功",function(){e.close(),i.resetForm("listAddForm"),i.getRows()}).finally(function(){return i.listAddLoading=!1})})},handleClickListEdit:function(t,e){var i=this;this.$refs.listEditForm.validate(function(t){if(!t)return!1;i.listEditLoading=!0,i.$Ajax.put(u.a.put.subModuleBySubModuleId,Object(d.a)({moduleId:i.moduleId,subModuleId:i.listSelectedRow.id},i.listEditForm)).success("修改模块成功",function(){e.close(),Object(d.a)(i.listSelectedRow,i.listEditForm),i.resetForm("listEditForm")}).finally(function(){return i.listEditLoading=!1})})},handleClickDeleteRow:function(t){var e=this,i=t.row,s=t.$index,l=(t.event,t.vm);i[this.listRowDeleteLoading$]=!0,this.$Ajax.delete(u.a.delete.subModuleBySubModuleId,{moduleId:this.moduleId,subModuleId:i.id}).success("删除成功",function(){e.listRows.splice(s,1),l.close()}).finally(function(){return i[e.listRowDeleteLoading$]=!1})},handleSwitchOrder:function(t){var e=this,i=t.source,s=t.sourceIndex,l=t.target,a=t.targetIndex;this.orderLoading=!0,this.$Ajax.put(u.a.put.switchSubModuleIndexBySubModuleId,{moduleId:this.moduleId,sourceSubModuleId:i.id,targetSubModuleId:l.id}).success(!0,function(){e.$set(e.listRows,s,l),e.$set(e.listRows,a,i)}).finally(function(){return e.orderLoading=!1})}},created:function(){this.getRows()}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-padding-all-small"},[i("div",{staticClass:"gar-search-bar"},[i("ul",{staticClass:"gar-search-bar-list"},[i("li",[i("em",{staticClass:"list-left list-label-4"},[t._v("关键字：")]),t._v(" "),i("div",{staticClass:"list-right common-w-large"},[i("el-input",{staticClass:"common-w-all",attrs:{clearable:"",size:"small",placeholder:"请输入关键字"},model:{value:t.params.likeText,callback:function(e){t.$set(t.params,"likeText",e)},expression:"params.likeText"}})],1)]),t._v(" "),i("li",{staticClass:"spacing"},[i("we-button",{attrs:{loading:t.listLoading,size:"small"},on:{click:t.getRows}},[t._v("查询\n        ")])],1)]),t._v(" "),i("div",{staticClass:"common-float-right"},[i("we-button",{attrs:{disabled:t.listLoading,size:"small",type:"success"},on:{click:function(e){t.listShowAdd=!0}}},[t._v("新增")])],1),t._v(" "),i("div",{staticClass:"common-clear"})]),t._v(" "),i("div",{staticClass:"gar-list-module-main",staticStyle:{top:"72px"}},[i("we-skeleton",{attrs:{animation:"","paragraph-rows":10,"title-width":"50%","paragraph-width":"100%"},on:{reload:t.getRows},model:{value:t.listSkeleton,callback:function(e){t.listSkeleton=e},expression:"listSkeleton"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.listSkeleton&&t.listLoading,expression:"!listSkeleton && listLoading"}],staticClass:"gar-list-module-main-inner",staticStyle:{bottom:"0"}},[0===t.listRows.length?[i("error-page",{attrs:{"image-width":180,"image-height":180}})]:i("ul",{staticClass:"gar-list-module"},t._l(t.listRows,function(e,s){return i("li",[i("div",{staticClass:"list-module-title"},[i("h3",{staticClass:"title-left"},[t._v(t._s(e.name)+"（"+t._s(e.value)+"）")]),t._v(" "),i("div",{staticClass:"title-right"},[i("we-button",{directives:[{name:"show",rawName:"v-show",value:s>0,expression:"index > 0"}],attrs:{shape:"circle",size:"mini","icon-name":"arrow-up",loading:t.orderLoading},on:{click:function(i){t.handleSwitchOrder({source:e,sourceIndex:s,target:t.listRows[s-1],targetIndex:s-1})}}}),t._v(" "),i("we-button",{directives:[{name:"show",rawName:"v-show",value:s<t.listRows.length-1,expression:"index < listRows.length - 1"}],attrs:{shape:"circle",size:"mini","icon-name":"arrow-down",loading:t.orderLoading},on:{click:function(i){t.handleSwitchOrder({source:e,sourceIndex:s,target:t.listRows[s+1],targetIndex:s+1})}}}),t._v(" "),i("we-button",{attrs:{shape:"circle",type:"primary",size:"mini","icon-name":"edit"},on:{click:function(i){t.handleListShowEdit({row:e,$index:s})}}}),t._v(" "),i("we-popover",{attrs:{title:"操作",type:"confirm",placement:"top-start",manual:e[t.listRowDeleteLoading$],"confirm-button-text":"删了吧","cancel-button-text":e[t.listRowDeleteLoading$]?"你没有想的机会了":"我再想想","cancel-button-options":{disabled:e[t.listRowDeleteLoading$]},"confirm-button-options":{loading:e[t.listRowDeleteLoading$]}},on:{"click-cancel-button":function(t,e){return e.close()},"click-confirm-button":function(i,l){return t.handleClickDeleteRow({row:e,$index:s,event:i,vm:l})}}},[i("template",{slot:"content"},[e[t.listRowDeleteLoading$]?[i("span",{staticStyle:{color:"red"}},[t._v("删除中...")]),t._v("删除完成后将自动关闭气泡\n                    ")]:[t._v("\n                      您确定要"),i("span",{staticStyle:{color:"red"}},[t._v("删除")]),t._v("该子模块及其"),i("span",{staticStyle:{color:"red"}},[t._v("相关数据")]),t._v("吗？\n                      "),i("div",{staticStyle:{color:"red"}},[t._v("删除后不可恢复！！！")])]],2),t._v(" "),i("we-button",{attrs:{shape:"circle",type:"danger",size:"mini","icon-name":"trash"}})],2)],1)]),t._v(" "),i("div",{staticClass:"common-padding-all-small"},[i("div",{staticClass:"list-module-row"},[i("em",{staticClass:"list-module-label"},[t._v("模块描述：")]),t._v(" "),i("div",{staticClass:"list-module-content"},[t._v(t._s(e.description))])]),t._v(" "),i("div",{staticClass:"list-module-row"},[i("em",{staticClass:"list-module-label"},[t._v("模块状态：")]),t._v(" "),i("div",{staticClass:"list-module-content"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":t.dict.statusValue.NORMAL,"inactive-value":t.dict.statusValue.DISABLED},on:{change:function(i){t.handleChangeStatus({row:e,$index:s})}},model:{value:e.status,callback:function(i){t.$set(e,"status",i)},expression:"row.status"}})],1)])])])}),0)],2)])],1),t._v(" "),i("we-layer",{attrs:{title:"新增子模块",width:"700",height:"530",drag:"",maskClosable:!1,"cancel-button-options":{disabled:t.listAddLoading},"confirm-button-options":{loading:t.listAddLoading}},on:{"click-confirm-button":t.handleClickListAdd},model:{value:t.listShowAdd,callback:function(e){t.listShowAdd=e},expression:"listShowAdd"}},[i("div",{staticClass:"common-padding-all",staticStyle:{"padding-bottom":"0"}},[i("el-form",{ref:"listAddForm",attrs:{model:t.listAddForm,rules:t.listAddFormRules,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"子模块名称：",prop:"name"}},[i("el-input",{attrs:{clearable:""},model:{value:t.listAddForm.name,callback:function(e){t.$set(t.listAddForm,"name",e)},expression:"listAddForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"子模块唯一标识符：",prop:"value"}},[i("el-input",{attrs:{clearable:""},model:{value:t.listAddForm.value,callback:function(e){t.$set(t.listAddForm,"value",e)},expression:"listAddForm.value"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"子模块描述：",prop:"description"}},[i("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:t.listAddForm.description,callback:function(e){t.$set(t.listAddForm,"description",e)},expression:"listAddForm.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"状态：",prop:"status"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":t.dict.statusValue.NORMAL,"inactive-value":t.dict.statusValue.DISABLED},model:{value:t.listAddForm.status,callback:function(e){t.$set(t.listAddForm,"status",e)},expression:"listAddForm.status"}})],1)],1)],1)]),t._v(" "),i("we-layer",{attrs:{title:"修改子模块",width:"700",height:"530",drag:"",maskClosable:!1,"cancel-button-options":{disabled:t.listEditLoading},"confirm-button-options":{loading:t.listEditLoading}},on:{"click-confirm-button":t.handleClickListEdit},model:{value:t.listShowEdit,callback:function(e){t.listShowEdit=e},expression:"listShowEdit"}},[i("div",{staticClass:"common-padding-all",staticStyle:{"padding-bottom":"0"}},[i("el-form",{ref:"listEditForm",attrs:{model:t.listEditForm,rules:t.listEditFormRules,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"子模块名称：",prop:"name"}},[i("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.listEditForm.name,callback:function(e){t.$set(t.listEditForm,"name",e)},expression:"listEditForm.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"子模块唯一标识符：",prop:"value"}},[i("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.listEditForm.value,callback:function(e){t.$set(t.listEditForm,"value",e)},expression:"listEditForm.value"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"子模块描述：",prop:"description"}},[i("el-input",{attrs:{type:"textarea",rows:10,resize:"none"},model:{value:t.listEditForm.description,callback:function(e){t.$set(t.listEditForm,"description",e)},expression:"listEditForm.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"子模块状态：",prop:"status"}},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#cccccc","active-value":t.dict.statusValue.NORMAL,"inactive-value":t.dict.statusValue.DISABLED},model:{value:t.listEditForm.status,callback:function(e){t.$set(t.listEditForm,"status",e)},expression:"listEditForm.status"}})],1)],1)],1)])],1)},staticRenderFns:[]},b=i("C7Lr")(p,h,!1,null,null,null);e.default=b.exports},elhn:function(t,e,i){"use strict";var s={name:"error-page",componentName:"ErrorPage",optionName:"errorPage",props:{type:{type:[String,Number],default:"noData"},title:String,imageWidth:{type:Number,default:200},imageHeight:{type:Number,default:200}},computed:{__title__:function(){return this.title?this.title:403===this.type||"403"===this.type?"抱歉您无权查看此页面。":404===this.type||"404"===this.type?"抱歉，您访问的页面不存在。":500===this.type||"500"===this.type?"抱歉，您的网络有问题加载失败。":"抱歉暂无信息。"}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"global-no-data"},[t._t("default",[403===t.type||"403"===t.type?s("img",{staticClass:"global-no-data-picture",style:{height:t.imageHeight+"px",width:t.imageWidth+"px"},attrs:{src:i("+hZp")}}):404===t.type||"404"===t.type?s("img",{staticClass:"global-no-data-picture",style:{height:t.imageHeight+"px",width:t.imageWidth+"px"},attrs:{src:i("29J1")}}):500===t.type||"500"===t.type?s("img",{staticClass:"global-no-data-picture",style:{height:t.imageHeight+"px",width:t.imageWidth+"px"},attrs:{src:i("Kgiw")}}):s("img",{staticClass:"global-no-data-picture",style:{height:t.imageHeight+"px",width:t.imageWidth+"px"},attrs:{src:i("29J1")}})]),t._v(" "),s("div",{staticClass:"global-no-data-text",class:{"is-margin-top":0!==t.imageWidth&&0!==t.imageHeight}},[t._t("title",[s("span",[t._v(t._s(t.__title__))])])],2),t._v(" "),s("div",{staticClass:"global-no-data-button"},[t._t("footer")],2)],2)},staticRenderFns:[]},a=i("C7Lr")(s,l,!1,null,null,null);e.a=a.exports}});